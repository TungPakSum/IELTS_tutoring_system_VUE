{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { onMounted, ref } from 'vue';\nimport { Html5QrcodeScanner } from \"html5-qrcode\";\nexport default {\n  __name: 'QrCodeScanner',\n  props: {\n    qrbox: {\n      type: Number,\n      \"default\": 250\n    },\n    fps: {\n      type: Number,\n      \"default\": 10\n    }\n  },\n  emits: ['result'],\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose,\n      emit = _ref.emit;\n    expose();\n    var props = __props;\n    var item = ref({});\n    var onScanSuccess = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(decodedText, decodedResult) {\n        var id, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              emit('result', decodedText, decodedResult);\n              console.log(\"decodedText:\" + decodedText);\n              console.log(\"decodedResult:\" + decodedResult);\n              id = item.value._id;\n              delete item.value._id;\n              _context.next = 7;\n              return fetch(\"/api/volunteers/update/\".concat(id), {\n                method: 'put',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(item.value)\n              });\n            case 7:\n              response = _context.sent;\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function onScanSuccess(_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    onMounted(function () {\n      var html5QrcodeScanner = new Html5QrcodeScanner('qr-code-full-region', props);\n      html5QrcodeScanner.render(onScanSuccess);\n    });\n    var __returned__ = {\n      props: props,\n      emit: emit,\n      item: item,\n      onScanSuccess: onScanSuccess,\n      onMounted: onMounted,\n      ref: ref,\n      get Html5QrcodeScanner() {\n        return Html5QrcodeScanner;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","Html5QrcodeScanner","item","onScanSuccess","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","decodedText","decodedResult","id","response","wrap","_callee$","_context","prev","next","emit","console","log","value","_id","fetch","concat","method","headers","body","JSON","stringify","sent","stop","_x","_x2","apply","arguments","html5QrcodeScanner","props","render"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/QrCodeScanner.vue"],"sourcesContent":["<script setup>\nimport { defineEmits, defineProps, onMounted, ref} from 'vue'\nimport {Html5QrcodeScanner} from \"html5-qrcode\"\n\nconst props = defineProps({\n  qrbox: {\n    type: Number,\n    default: 250\n  },\n  fps: {\n    type: Number,\n    default: 10\n  }, \n});\n\nconst emit = defineEmits(['result']);\nconst item = ref({});\n\nconst onScanSuccess = async function(decodedText, decodedResult) \n{\n  emit('result', decodedText, decodedResult);\n\n  console.log(\"decodedText:\"+ decodedText);\n  console.log(\"decodedResult:\"+ decodedResult);\n\n  let id = item.value._id;\n  delete item.value._id;\n  const response = await fetch(`/api/volunteers/update/${id}`, {\n  method: 'put',\n  headers: {\n           'Content-Type': 'application/json'\n           },\n  body: JSON.stringify(item.value)\n  });\n  \n}\n\nonMounted(() => {\n  const html5QrcodeScanner = new Html5QrcodeScanner('qr-code-full-region', props);\n  html5QrcodeScanner.render(onScanSuccess);\n});\n</script>\n\n<template>\n<div id=\"qr-code-full-region\"></div>\n</template>\n"],"mappings":";;;;;;AACA,SAAmCA,SAAS,EAAEC,GAAG,QAAO,KAAK;AAC7D,SAAQC,kBAAkB,QAAO,cAAc;;;;;;;;;;;;;;;;;;;IAc/C,IAAMC,IAAI,GAAGF,GAAG,CAAC,CAAC,CAAC,CAAC;IAEpB,IAAMG,aAAa;MAAA,IAAAC,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAeC,WAAW,EAAEC,aAAa;QAAA,IAAAC,EAAA,EAAAC,QAAA;QAAA,OAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAE7DC,IAAI,CAAC,QAAQ,EAAET,WAAW,EAAEC,aAAa,CAAC;cAE1CS,OAAO,CAACC,GAAG,CAAC,cAAc,GAAEX,WAAW,CAAC;cACxCU,OAAO,CAACC,GAAG,CAAC,gBAAgB,GAAEV,aAAa,CAAC;cAExCC,EAAE,GAAGT,IAAI,CAACmB,KAAK,CAACC,GAAG;cACvB,OAAOpB,IAAI,CAACmB,KAAK,CAACC,GAAG;cAACP,QAAA,CAAAE,IAAA;cAAA,OACCM,KAAK,2BAAAC,MAAA,CAA2Bb,EAAE,GAAI;gBAC7Dc,MAAM,EAAE,KAAK;gBACbC,OAAO,EAAE;kBACA,cAAc,EAAE;gBAChB,CAAC;gBACVC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC3B,IAAI,CAACmB,KAAK;cAC/B,CAAC,CAAC;YAAA;cANIT,QAAQ,GAAAG,QAAA,CAAAe,IAAA;YAAA;YAAA;cAAA,OAAAf,QAAA,CAAAgB,IAAA;UAAA;QAAA,GAAAvB,OAAA;MAAA,CAQf;MAAA,gBAjBKL,aAAaA,CAAA6B,EAAA,EAAAC,GAAA;QAAA,OAAA7B,KAAA,CAAA8B,KAAA,OAAAC,SAAA;MAAA;IAAA,GAiBlB;IAEDpC,SAAS,CAAC,YAAM;MACd,IAAMqC,kBAAkB,GAAG,IAAInC,kBAAkB,CAAC,qBAAqB,EAAEoC,KAAK,CAAC;MAC/ED,kBAAkB,CAACE,MAAM,CAACnC,aAAa,CAAC;IAC1C,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}