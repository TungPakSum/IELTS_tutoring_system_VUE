{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref, onMounted } from \"vue\";\nimport JwtDecode from \"jwt-decode\";\nexport default {\n  name: \"App\",\n  setup: function setup() {\n    var user = ref({});\n    var login = ref(false);\n    var visible = ref(false);\n    onMounted(function () {\n      fetchPage();\n    });\n    var fetchPage = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var decoded;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (localStorage.getItem(\"token\") !== null) {\n                login.value = true;\n                decoded = JwtDecode(localStorage.getItem(\"token\")); // user.value = JSON.stringify(decoded)\n                user.value = decoded;\n                console.log(user.value);\n              }\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function fetchPage() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var logout = function logout() {\n      localStorage.removeItem(\"token\");\n      location.reload();\n    };\n    return {\n      user: user,\n      visible: visible,\n      login: login,\n      logout: logout\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","JwtDecode","name","setup","user","login","visible","fetchPage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","decoded","wrap","_callee$","_context","prev","next","localStorage","getItem","value","console","log","stop","apply","arguments","logout","removeItem","location","reload"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/App.vue"],"sourcesContent":["<template>\n  <div id=\"vue\">\n    <nav class=\"navbar navbar-expand-lg navbar-light\">\n      <div class=\"container-sm\">\n        <a class=\"navbar-brand\">\n          <img\n            src=\"./assets/icon.png\"\n            width=\"148\"\n            height=\"60\"\n          >\n        </a>\n        <button\n          aria-controls=\"navbarSupportedContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n          class=\"navbar-toggler\"\n          data-bs-target=\"#navbarSupportedContent\"\n          data-bs-toggle=\"collapse\"\n          type=\"button\"\n          @click=\"visible = !visible\"\n        >\n          <span class=\"navbar-toggler-icon\" />\n        </button>\n        <div\n          id=\"navbarSupportedContent\"\n          :class=\"!visible ? 'collapse' : ''\"\n          class=\"navbar-collapse\"\n        >\n          <ul\n            v-if=\"login\"\n            class=\"navbar-nav me-auto mb-2 mb-lg-0\"\n          >\n            <li class=\"nav-item\">\n              <a\n                class=\"nav-link\"\n                href=\"/\"\n              >賣旗日</a>\n            </li>\n            <li class=\"nav-item\">\n              <a\n                class=\"nav-link\"\n                href=\"/admin\"\n              >CUBC用戶</a>\n            </li>\n            <li class=\"nav-item\">\n              <a\n                class=\"nav-link\"\n                href=\"/stationsManager\"\n              >旗長用戶</a>\n            </li>\n          </ul>\n          \n          <ul\n            v-else\n            class=\"navbar-nav me-auto mb-2 mb-lg-0\"\n          >\n            <li class=\"nav-item\">\n              <a\n                class=\"nav-link\"\n                href=\"/login\"\n              >登入</a>\n            </li>\n          </ul>\n          <form class=\"d-flex align-items-center\">\n            <div>\n              <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                <li class=\"nav-item\">\n                  <a\n                    class=\"nav-link\"\n                  >{{ user.username }}</a>\n                </li>\n              </ul>\n            </div>\n            <div>\n              <i \n                v-if=\"login\"\n                type=\"submit\"\n                class=\"bi bi-box-arrow-in-left\"\n                style=\"font-size: 33px;\"\n                @click=\"logout\"\n              />\n            </div>\n            <!-- <router-link\n              v-slot=\"{ navigate }\"\n              :to=\"{ path: '/login' }\"\n              custom\n            > -->\n            <!-- <button\n                v-if=\"!login\"\n                class=\"btn btn-outline-success\"\n                type=\"submit\"\n                @click=\"navigate\"\n              >\n                登入\n              </button> -->\n            <!-- <button\n              v-if=\"login\"\n              class=\"btn btn-outline-success\"\n              type=\"submit\"\n              @click=\"logout\"\n            > -->\n            <!-- </button> -->\n          </form>\n        </div>\n      </div>\n    </nav>\n    <div class=\"container-sm\">\n      <router-view />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from \"vue\";\nimport JwtDecode from \"jwt-decode\";\n\nexport default {\n  name: \"App\",\n  setup: function () {\n    const user = ref({});\n    const login = ref(false);\n    let visible = ref(false);\n\n    onMounted(function () {\n      fetchPage();\n    });\n\n    const fetchPage = async function () {\n      if (localStorage.getItem(\"token\") !== null) {\n        login.value = true;\n        const decoded = JwtDecode(localStorage.getItem(\"token\"));\n        // user.value = JSON.stringify(decoded)\n        user.value = decoded;\n        console.log(user.value);\n      }\n    };\n\n    const logout = function () {\n      localStorage.removeItem(\"token\");\n      location.reload();\n    }\n    return {\n      user,\n      visible,\n      login,\n      logout\n    };\n  },\n};\n</script>\n<style scoped>\n/**/\n</style>\n"],"mappings":";;AAiHA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAK;AACpC,OAAOC,SAAQ,MAAO,YAAY;AAElC,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,KAAK,EAAE,SAAAA,MAAA,EAAY;IACjB,IAAMC,IAAG,GAAIL,GAAG,CAAC,CAAC,CAAC,CAAC;IACpB,IAAMM,KAAI,GAAIN,GAAG,CAAC,KAAK,CAAC;IACxB,IAAIO,OAAM,GAAIP,GAAG,CAAC,KAAK,CAAC;IAExBC,SAAS,CAAC,YAAY;MACpBO,SAAS,EAAE;IACb,CAAC,CAAC;IAEF,IAAMA,SAAQ;MAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAI,SAAAC,QAAA;QAAA,IAAAC,OAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAChB,IAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,MAAM,IAAI,EAAE;gBAC1Cf,KAAK,CAACgB,KAAI,GAAI,IAAI;gBACZR,OAAM,GAAIZ,SAAS,CAACkB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,EACxD;gBACAhB,IAAI,CAACiB,KAAI,GAAIR,OAAO;gBACpBS,OAAO,CAACC,GAAG,CAACnB,IAAI,CAACiB,KAAK,CAAC;cACzB;YAAA;YAAA;cAAA,OAAAL,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAZ,OAAA;MAAA,CACD;MAAA,gBARKL,SAAQA,CAAA;QAAA,OAAAC,IAAA,CAAAiB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAQb;IAED,IAAMC,MAAK,GAAI,SAATA,MAAKA,CAAA,EAAgB;MACzBR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;MAChCC,QAAQ,CAACC,MAAM,EAAE;IACnB;IACA,OAAO;MACL1B,IAAI,EAAJA,IAAI;MACJE,OAAO,EAAPA,OAAO;MACPD,KAAK,EAALA,KAAK;MACLsB,MAAK,EAALA;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}