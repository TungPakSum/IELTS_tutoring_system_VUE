{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport { useRoute } from 'vue-router';\nimport { computed, ref, onMounted, onUnmounted } from 'vue';\nexport default {\n  name: 'BreadcrumbUI',\n  setup: function setup() {\n    var _this = this;\n    var router = useRoute();\n    var eventName = ref(\"\");\n    var stationName = ref(\"\");\n    var volunteerName = ref(\"\");\n    var flagbagName = ref(\"\");\n    onMounted(function () {\n      var app = appContext.app;\n      app.component('BreadcrumbUI', _this);\n    });\n    onUnmounted(function () {\n      var app = appContext.app;\n      app.component('BreadcrumbUI', null);\n    });\n    var emitPrintQrCodes = function emitPrintQrCodes() {\n      var app = appContext.app;\n      app.emit('print-qr-codes');\n    };\n    var fetchName = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id, object) {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"/api/\".concat(object, \"/get/\").concat(id));\n            case 2:\n              response = _context.sent;\n              if (!response.ok) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 6;\n              return response.json();\n            case 6:\n              data = _context.sent;\n              console.log(data.items);\n              return _context.abrupt(\"return\", data.items.name);\n            case 9:\n              return _context.abrupt(\"return\", '');\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function fetchName(_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var printQrCodes = function printQrCodes() {\n      if (this.$root) {\n        this.$root.$emit('printQrCodes');\n      }\n    };\n    function populateDict() {\n      return _populateDict.apply(this, arguments);\n    }\n    function _populateDict() {\n      _populateDict = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!router.params.eid) {\n                _context2.next = 4;\n                break;\n              }\n              _context2.next = 3;\n              return fetchName(router.params.eid, \"events\");\n            case 3:\n              eventName.value = _context2.sent;\n            case 4:\n              if (!router.params.sid) {\n                _context2.next = 8;\n                break;\n              }\n              _context2.next = 7;\n              return fetchName(router.params.sid, \"stations\");\n            case 7:\n              stationName.value = _context2.sent;\n            case 8:\n              if (!router.params.vid) {\n                _context2.next = 12;\n                break;\n              }\n              _context2.next = 11;\n              return fetchName(router.params.vid, \"volunteers\");\n            case 11:\n              volunteerName.value = _context2.sent;\n            case 12:\n              if (!router.params.fid) {\n                _context2.next = 16;\n                break;\n              }\n              _context2.next = 15;\n              return fetchName(router.params.fid, \"flagbags\");\n            case 15:\n              flagbagName.value = _context2.sent;\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return _populateDict.apply(this, arguments);\n    }\n    populateDict();\n    var items = computed(function () {\n      var items = [];\n      var dict = [{\n        name: '賣旗日',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: eventName.value + '活動詳情'\n      }, {\n        name: eventName.value + '的旗站',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: stationName.value + '旗站詳情'\n      }, {\n        name: stationName.value + '的義工',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: volunteerName.value + '義工詳情'\n      }, {\n        name: volunteerName.value + '的旗袋',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }, {\n          name: '印出',\n          next: emitPrintQrCodes\n        }]\n      }, {\n        name: flagbagName.value + '旗袋詳情'\n      }];\n      var userDict = [{\n        name: '用戶',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: '用戶詳情'\n      }];\n      var elements = router.path.split('/');\n      var length = elements.length - 1;\n      if (elements[1] == 'admin' || elements[1] == 'stationManager') {\n        dict = userDict;\n      }\n      var element = 1;\n      var path = '';\n      for (var i = 0; i < dict.length; i++) {\n        path += '/' + elements[element];\n        dict[i].path = path;\n        if (typeof dict[i].buttons != \"undefined\") {\n          for (var j = 0; j < dict[i].buttons.length; j++) {\n            dict[i].buttons[j].path = dict[i].path + '/' + dict[i].buttons[j].next;\n          }\n        }\n        element++;\n      }\n      items = dict.slice(0, length);\n      console.log(items);\n      return items;\n    });\n    return {\n      items: items,\n      fetchName: fetchName,\n      populateDict: populateDict,\n      printQrCodes: printQrCodes\n    };\n  }\n};","map":{"version":3,"names":["useRoute","computed","ref","onMounted","onUnmounted","name","setup","_this","router","eventName","stationName","volunteerName","flagbagName","app","appContext","component","emitPrintQrCodes","emit","fetchName","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","object","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","json","console","log","items","abrupt","stop","_x","_x2","apply","arguments","printQrCodes","$root","$emit","populateDict","_populateDict","_callee2","_callee2$","_context2","params","eid","value","sid","vid","fid","dict","buttons","userDict","elements","path","split","length","element","i","j","slice"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/BreadcrumbUI.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex justify-content-between\">\n    <div class=\"d-flex align-items-center\">\n      <nav\n        aria-label=\"breadcrumb\"\n        class=\"d-flex align-items-center\"\n      >\n        <ol class=\"breadcrumb\">\n          <li\n            v-for=\"(item, index) in items\"\n            :key=\"index\"\n            class=\"breadcrumb-item\"\n          >\n            <a\n              v-if=\"items.length - 1 !== index\"\n              :href=\"item.path\"\n            >\n              {{ item.name }}\n            </a>\n            <a v-else>{{ item.name }}</a>\n          </li>\n        </ol>\n      </nav>\n    </div>\n\n    <div class=\"d-flex justify-content-end\">\n      <div \n        v-for=\"(item, index) in items[items.length - 1].buttons\"\n        :key=\"index\"\n      >\n        <router-link\n          v-slot=\"{ navigate }\"\n          :to=\"`${item.path}`\"\n          custom\n        >\n          <button\n            v-if=\"typeof item != 'undefined'\"\n            class=\"btn btn-sm btn-success\"\n            @click=\"navigate\"\n          >\n            {{ item.name }}\n          </button>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router'\nimport { computed, ref , onMounted , onUnmounted} from 'vue'\n\nexport default {\n  name: 'BreadcrumbUI',\n  setup() {\n    const router = useRoute()\n    let eventName = ref(\"\")\n    let stationName = ref(\"\")\n    let volunteerName = ref(\"\")\n    let flagbagName = ref(\"\")\n\n    \n\n    onMounted(() => {\n      const app = appContext.app;\n      app.component('BreadcrumbUI', this);\n    });\n\n    onUnmounted(() => {\n      const app = appContext.app;\n      app.component('BreadcrumbUI', null);\n    });\n\n\n    const emitPrintQrCodes = () => {\n      const app = appContext.app;\n      app.emit('print-qr-codes');\n    };\n\n    const fetchName = async function (id, object)\n    {\n      const response = await fetch(`/api/${object}/get/${id}`);\n      if (response.ok) {\n        let data = await response.json();\n        console.log(data.items)\n        return data.items.name;  \n       }\n      return ''\n    };\n\n    const printQrCodes = function() {\n      if (this.$root) {\n        this.$root.$emit('printQrCodes');\n      }\n    }\n\n    async function populateDict()\n    { \n      if (router.params.eid) {\n        eventName.value = await fetchName(router.params.eid, \"events\");\n      }\n      if (router.params.sid) {\n        stationName.value = await fetchName(router.params.sid, \"stations\");\n      }\n      if (router.params.vid) {\n        volunteerName.value = await fetchName(router.params.vid, \"volunteers\");\n      }\n      if (router.params.fid) {\n        flagbagName.value = await fetchName(router.params.fid, \"flagbags\");\n      }\n    }\n      \n    populateDict();\n\n    const items = computed(() => {\n      let items = [];\n\n\n        let dict = [{\n          name: '賣旗日',\n          buttons: [\n            {\n              name: '建立',\n              next: 'create'\n            }\n          ]\n        },\n        {\n          name: eventName.value + '活動詳情'\n        },\n        {\n          name: eventName.value + '的旗站',\n          buttons: [{\n            name: '建立',\n            next: 'create'\n          }]\n        },\n        {\n          name: stationName.value + '旗站詳情'\n        }\n          ,\n        {\n          name: stationName.value + '的義工',\n          buttons: [{\n            name: '建立',\n            next: 'create'\n          }]\n        },\n        {\n          name: volunteerName.value + '義工詳情',\n        },\n        {\n          name: volunteerName.value + '的旗袋',\n          buttons: [{\n            name: '建立',\n            next: 'create'\n          }, {\n            name: '印出',\n            next: emitPrintQrCodes\n          }]\n        },\n        {\n          name: flagbagName.value + '旗袋詳情',\n        }\n        ];\n        \n        let userDict = [{\n          name: '用戶',\n          buttons: [\n            {\n              name: '建立',\n              next: 'create'\n            }\n          ]\n        }, {\n          name: '用戶詳情'\n        },]\n      \n\n      let elements = router.path.split('/')\n      let length = elements.length - 1;\n      if (elements[1] == 'admin' || elements[1] == 'stationManager') {\n        dict = userDict;\n      }\n\n      let element = 1;\n      let path = '';\n      for (let i = 0; i < dict.length; i++) {\n        path += '/' + elements[element];\n        dict[i].path = path;\n        if (typeof dict[i].buttons != \"undefined\") {\n          for (let j = 0; j < dict[i].buttons.length; j++) {\n            dict[i].buttons[j].path = dict[i].path + '/' + dict[i].buttons[j].next;\n          }\n        }\n        element++\n      }\n\n      items = dict.slice(0, length);\n      console.log(items)\n      return items;\n    })\n\n    \n\n    return {\n      items,\n      fetchName,\n      populateDict,\n      printQrCodes\n      \n      \n      \n    }\n  }\n}\n</script>\n\n<style scoped>\n.btn {\n  margin-right: 5px;\n}\n\n</style>\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}