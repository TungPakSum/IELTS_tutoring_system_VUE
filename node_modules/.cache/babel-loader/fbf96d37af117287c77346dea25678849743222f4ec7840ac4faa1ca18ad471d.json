{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport { onMounted, computed, ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\nexport default {\n  name: \"StationsForm\",\n  setup: function setup() {\n    var item = ref({});\n    var updateForm = ref(false);\n    var selected = ref(\"\");\n    var path = ref();\n    var oUid = ref(\"\");\n    var eid = ref();\n    var router = useRoute();\n    var ics = ref({});\n    var districts = computed(function () {\n      return [{\n        district: \"Islands\",\n        name: \"離島區\"\n      }, {\n        district: \"KwaiTsing\",\n        name: \"葵青區\"\n      }, {\n        district: \"North\",\n        name: \"北區\"\n      }, {\n        district: \"SaiKung\",\n        name: \"西貢區\"\n      }, {\n        district: \"ShaTin\",\n        name: \"沙田區\"\n      }, {\n        district: \"TaiPo\",\n        name: \"大埔區\"\n      }, {\n        district: \"TsuenWan\",\n        name: \"荃灣區\"\n      }, {\n        district: \"TuenMun\",\n        name: \"屯門區\"\n      }, {\n        district: \"YuenLong\",\n        name: \"元朗區\"\n      }, {\n        district: \"KowloonCity\",\n        name: \"九龍城區\"\n      }, {\n        district: \"KwunTong\",\n        name: \"觀塘區\"\n      }, {\n        district: \"ShamShuiPo\",\n        name: \"深水埗區\"\n      }, {\n        district: \"WongTaiSin\",\n        name: \"黃大仙區\"\n      }, {\n        district: \"CentralandWestern\",\n        name: \"中西區\"\n      }, {\n        district: \"Eastern\",\n        name: \"東區\"\n      }, {\n        district: \"Southern\",\n        name: \"南區\"\n      }, {\n        district: \"WanChai\",\n        name: \"灣仔區\"\n      }];\n    });\n    onMounted(function () {\n      if (!(router.params.sid == null)) {\n        updateForm.value = true;\n        fetchPage();\n      }\n      checkUserToken();\n      fetchICs();\n      getEid();\n      getPath();\n    });\n    var checkUserToken = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"/api/users/check\", {\n                headers: {\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                }\n              });\n            case 2:\n              response = _context.sent;\n              if (response.status === 401) {\n                alert(response.statusText);\n                location.assign(\"/login\");\n              } else if (response.status === 403) {\n                alert(response.statusText);\n                history.back();\n              }\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function checkUserToken() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var fetchPage = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"/api/stations/get/\".concat(router.params.sid, \"?eid=\").concat(eid.value), {\n                headers: {\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                }\n              });\n            case 2:\n              response = _context2.sent;\n              if (!response.ok) {\n                _context2.next = 12;\n                break;\n              }\n              _context2.next = 6;\n              return response.json();\n            case 6:\n              data = _context2.sent;\n              item.value = data.items;\n              oUid.value = item.value.IC._id;\n              selected.value = item.value.district;\n              _context2.next = 13;\n              break;\n            case 12:\n              if (response.status === 401) {\n                alert(response.statusText);\n                location.assign(\"/login\");\n              } else if (response.status === 403) {\n                alert(response.statusText);\n                history.back();\n              }\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function fetchPage() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    var fetchICs = /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return fetch(\"/api/users/get/role/stationManager?printList=true\", {\n                headers: {\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                }\n              });\n            case 2:\n              response = _context3.sent;\n              if (!response.ok) {\n                _context3.next = 11;\n                break;\n              }\n              _context3.next = 6;\n              return response.json();\n            case 6:\n              data = _context3.sent;\n              ics.value = data.items;\n              console.log(ics.value);\n              _context3.next = 12;\n              break;\n            case 11:\n              if (response.status === 401) {\n                alert(response.statusText);\n                history.back();\n              } else if (response.status === 403) {\n                alert(response.statusText);\n                history.back();\n              }\n            case 12:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      return function fetchICs() {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n    var getEid = function getEid() {\n      eid.value = router.params.eid;\n    };\n    var getPath = function getPath() {\n      var elements = router.path.split(\"/\");\n      path.value = \"/\" + elements[1];\n      for (var i = 2; i < elements.length - 1; i++) {\n        path.value += \"/\" + elements[i];\n      }\n    };\n    var submit = /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event) {\n        var response, id, _response;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              event.preventDefault();\n              if (updateForm.value) {\n                _context4.next = 11;\n                break;\n              }\n              item.value.eid = eid.value;\n              _context4.next = 5;\n              return fetch(\"/api/users/update/assigned/\".concat(item.value.IC._id), {\n                method: \"put\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                },\n                body: JSON.stringify({\n                  assigned: true\n                })\n              });\n            case 5:\n              _context4.next = 7;\n              return fetch(\"/api/stations/create\", {\n                method: \"post\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify(item.value)\n              });\n            case 7:\n              response = _context4.sent;\n              if (response.ok) {\n                alert(\"建立成功\");\n                window.location.replace(path.value);\n              } else {\n                alert(response.statusText);\n              }\n              _context4.next = 22;\n              break;\n            case 11:\n              id = item.value._id;\n              delete item.value._id;\n              if (!(oUid.value !== item.value.IC._id)) {\n                _context4.next = 18;\n                break;\n              }\n              _context4.next = 16;\n              return fetch(\"/api/users/update/assigned/\".concat(oUid.value), {\n                method: \"put\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                },\n                body: JSON.stringify({\n                  assigned: false\n                })\n              });\n            case 16:\n              _context4.next = 18;\n              return fetch(\"/api/users/update/assigned/\".concat(item.value.IC._id), {\n                method: \"put\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  assigned: true\n                })\n              });\n            case 18:\n              _context4.next = 20;\n              return fetch(\"/api/stations/update/\".concat(id), {\n                method: \"put\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                },\n                body: JSON.stringify(item.value)\n              });\n            case 20:\n              _response = _context4.sent;\n              if (_response.ok) {\n                alert(\"編輯成功\");\n                window.location.replace(path.value);\n              } else {\n                alert(_response.statusText);\n              }\n            case 22:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      return function submit(_x) {\n        return _ref4.apply(this, arguments);\n      };\n    }();\n    var deleteItem = /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(event) {\n        var id, response;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              event.preventDefault();\n              id = item.value._id;\n              if (!confirm(\"確定刪除?\")) {\n                _context5.next = 8;\n                break;\n              }\n              _context5.next = 5;\n              return fetch(\"/api/stations/delete/\".concat(id), {\n                method: \"delete\",\n                body: JSON.stringify(item.value),\n                headers: {\n                  \"x-access-token\": \"\".concat(localStorage.getItem(\"token\"))\n                }\n              });\n            case 5:\n              response = _context5.sent;\n              console.log(\"line 158\");\n              if (response.ok) {\n                alert(\"項目已刪除\");\n                location.assign(path.value);\n              } else {\n                alert(response.statusText);\n              }\n            case 8:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5);\n      }));\n      return function deleteItem(_x2) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n    return {\n      districts: districts,\n      updateForm: updateForm,\n      selected: selected,\n      submit: submit,\n      deleteItem: deleteItem,\n      ics: ics,\n      item: item\n    };\n  }\n};","map":{"version":3,"names":["onMounted","computed","ref","useRoute","name","setup","item","updateForm","selected","path","oUid","eid","router","ics","districts","district","params","sid","value","fetchPage","checkUserToken","fetchICs","getEid","getPath","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","fetch","headers","concat","localStorage","getItem","sent","status","alert","statusText","location","assign","history","back","stop","apply","arguments","_ref2","_callee2","data","_callee2$","_context2","ok","json","items","IC","_id","_ref3","_callee3","_callee3$","_context3","console","log","elements","split","i","length","submit","_ref4","_callee4","event","id","_response","_callee4$","_context4","preventDefault","method","body","JSON","stringify","assigned","window","replace","_x","deleteItem","_ref5","_callee5","_callee5$","_context5","confirm","_x2"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/StationsForm.vue"],"sourcesContent":["\n<template>\n  <div class=\"container-fluid px-1 py-5 mx-auto background\">\n    <div class=\"row d-flex justify-content-center\">\n      <div class=\"col-xl-7 col-lg-8 col-md-9 col-11 text-center\">\n        <h3>旗站資料</h3>\n        <!-- <p class=\"blue-text\">\n          Just answer a few questions<br> so that we can personalize the right experience for you.\n                    </p> -->\n        <div class=\"card\">\n          <!-- <h5 class=\"text-center mb-4\">\n            Powering world-class companies\n                      </h5> -->\n          <form class=\"form-card\" @submit.prevent=\"submit\">\n            <div class=\"row justify-content-between text-left\">\n              <div class=\"form-group col-sm-6 flex-column d-flex\">\n                <label class=\"form-label px-3\">旗站名稱\n                  <span class=\"text-danger\"> *</span>\n                </label>\n                <input v-model=\"item.name\" type=\"text\" class=\"form-control\" required=\"required\">\n              </div>\n              <div class=\"form-group col-sm-6 flex-column d-flex\">\n                <label class=\"form-label px-3\">地區<span class=\"text-danger\"> *</span></label>\n                <!-- <input\n                  v-model=\"item.name\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  required=\"required\"\n                        > -->\n                <select v-model=\"item.district\" class=\"form-select\" required=\"required\">\n                  <option disabled value=\"\">\n                    請選擇\n                  </option>\n                  <option v-for=\"district in districts\" :key=\"district\" :value=\"district\">\n                    {{ district.name }}\n                  </option>\n                </select>\n              </div>\n            </div>\n            <div class=\"row justify-content-between text-left\">\n              <div class=\"form-group col-sm-6 flex-column d-flex\">\n                <label class=\"form-label px-3\">地址<span class=\"text-danger\"> *</span></label>\n                <input v-model=\"item.address\" type=\"text\" class=\"form-control\" required=\"required\">\n              </div>\n              <div class=\"form-group col-sm-6 flex-column d-flex\">\n                <label class=\"form-label px-3\">所屬旗站<span class=\"text-danger\"> *</span></label>\n                <input v-model=\"item.subdistrict\" type=\"text\" class=\"form-control\" required=\"required\">\n              </div>\n            </div>\n            <div class=\"row justify-content-between text-left\">\n              <div class=\"form-group col-sm-6 flex-column d-flex\">\n                <label class=\"form-label px-3\">已發送旗袋<span class=\"text-danger\"> *</span></label> <input\n                  v-model=\"item.flagbag\" type=\"number\" class=\"form-control\" required=\"required\">\n              </div>\n              <div class=\"form-group col-sm-6 flex-column d-flex\">\n                <label class=\"form-label px-3\">旗站負責人<span class=\"text-danger\"> *</span></label>\n                <select v-model=\"item.IC\" class=\"form-select\" aria-label=\"Default select example\">\n                  <option disabled value=\"\">\n                    請選擇\n                  </option>\n                  <option v-for=\"ic in ics\" :key=\"ic\" :value=\"ic\">\n                    {{ ic.username }}\n                  </option>\n                </select>\n              </div>\n            </div>\n\n            <div class=\"row justify-content-end\">\n              <div class=\"form-group col-sm-6\">\n                <button type=\"submit\" class=\"btn btn-primary\">\n                  儲存\n                </button>\n                <button id=\"Dbutton\" type=\"button\" class=\"btn btn-danger\" @click=\"deleteItem\">\n                  刪除\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- <form\n    class=\"form-card\"\n    @submit.prevent=\"submit\"\n  >\n    <div class=\"mb-3\">\n      <legend>旗站資料</legend>\n    </div>\n    <div class=\"mb-3\">\n      <label\n        for=\"name\"\n        class=\"form-label\"\n      >旗站名稱</label>\n      <input\n        v-model=\"item.name\"\n        type=\"tezxt\"\n        class=\"form-control\"\n        required=\"required\"\n      >\n    </div>\n    <div class=\"mb-3\">\n      <label\n        for=\"district\"\n        class=\"form-label\"\n      >地區</label>\n      <select\n        v-model=\"item.district\"\n        class=\"form-select\"\n        aria-label=\"Default select example\"\n      >\n        <option\n          disabled\n          value=\"\"\n        >\n          請選擇\n        </option>\n        <option\n          v-for=\"district in districts\"\n          :key=\"district\"\n          :value=\"district\"\n        >\n          {{ district.name }}\n        </option>\n      </select>\n    </div>\n    <div class=\"mb-3\">\n      <label\n        for=\"address\"\n        class=\"form-label\"\n      >地址</label>\n      <input\n        v-model=\"item.address\"\n        type=\"text\"\n        class=\"form-control\"\n        required=\"required\"\n      >\n    </div>\n    <div class=\"mb-3\">\n      <label\n        for=\"subdistrict\"\n        class=\"form-label\"\n      >所屬旗站</label>\n      <input\n        v-model=\"item.subdistrict\"\n        type=\"text\"\n        class=\"form-control\"\n        required=\"required\"\n      >\n    </div>\n    <div class=\"mb-3\">\n      <label\n        for=\"flagbag\"\n        class=\"form-label\"\n      >已發送旗袋</label>\n      <input\n        v-model=\"item.flagbag\"\n        type=\"number\"\n        class=\"form-control\"\n        required=\"required\"\n      >\n    </div>\n\n    <div class=\"mb-3\">\n      <legend>旗站負責人</legend>\n    </div>\n    <div class=\"mb-3\">\n      <label\n        for=\"ic\"\n        class=\"form-label\"\n      >站長</label>\n      <select\n        v-model=\"item.IC\"\n        class=\"form-select\"\n        aria-label=\"Default select example\"\n      >\n        <option\n          disabled\n          value=\"\"\n        >\n          Please select one\n        </option>\n        <option\n          v-for=\"ic in ics\"\n          :key=\"ic\"\n          :value=\"ic\"\n        >\n          {{ ic.username }}\n        </option>\n      </select>\n    </div>\n\n    <div class=\"mb-3 =d-flex\">\n      <button\n        type=\"submit\"\n        class=\"btn btn-primary\"\n      >\n        儲存\n      </button>\n      <button\n        id=\"Dbutton\"\n        type=\"button\"\n        class=\"btn btn-danger\"\n        @click=\"deleteItem\"\n      >\n        刪除\n      </button>\n    </div>\n        </form> -->\n</template>\n\n<script>\nimport { onMounted, computed, ref } from \"vue\";\nimport { useRoute } from \"vue-router\";\n\nexport default {\n  name: \"StationsForm\",\n  setup() {\n    const item = ref({});\n    let updateForm = ref(false);\n    let selected = ref(\"\");\n    let path = ref();\n    let oUid = ref(\"\");\n    const eid = ref();\n    const router = useRoute();\n    const ics = ref({});\n    const districts = computed(() => {\n      return [\n        {\n          district: \"Islands\",\n          name: \"離島區\",\n        },\n        {\n          district: \"KwaiTsing\",\n          name: \"葵青區\",\n        },\n        {\n          district: \"North\",\n          name: \"北區\",\n        },\n        {\n          district: \"SaiKung\",\n          name: \"西貢區\",\n        },\n        {\n          district: \"ShaTin\",\n          name: \"沙田區\",\n        },\n        {\n          district: \"TaiPo\",\n          name: \"大埔區\",\n        },\n        {\n          district: \"TsuenWan\",\n          name: \"荃灣區\",\n        },\n        {\n          district: \"TuenMun\",\n          name: \"屯門區\",\n        },\n        {\n          district: \"YuenLong\",\n          name: \"元朗區\",\n        },\n        {\n          district: \"KowloonCity\",\n          name: \"九龍城區\",\n        },\n        {\n          district: \"KwunTong\",\n          name: \"觀塘區\",\n        },\n        {\n          district: \"ShamShuiPo\",\n          name: \"深水埗區\",\n        },\n        {\n          district: \"WongTaiSin\",\n          name: \"黃大仙區\",\n        },\n        {\n          district: \"CentralandWestern\",\n          name: \"中西區\",\n        },\n        {\n          district: \"Eastern\",\n          name: \"東區\",\n        },\n        {\n          district: \"Southern\",\n          name: \"南區\",\n        },\n        {\n          district: \"WanChai\",\n          name: \"灣仔區\",\n        },\n      ];\n    });\n\n    onMounted(() => {\n      if (!(router.params.sid == null)) {\n        updateForm.value = true;\n        fetchPage();\n      }\n      checkUserToken();\n      fetchICs();\n      getEid();\n      getPath();\n    });\n\n    const checkUserToken = async function () {\n      const response = await fetch(`/api/users/check`, {\n        headers: {\n          \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n        },\n      });\n      if (response.status === 401) {\n        alert(response.statusText);\n        location.assign(\"/login\");\n      } else if (response.status === 403) {\n        alert(response.statusText);\n        history.back()\n      }\n    }\n\n    const fetchPage = async function () {\n      const response = await fetch(`/api/stations/get/${router.params.sid}?eid=${eid.value}`, {\n        headers: {\n          \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n        }\n      });\n      if (response.ok) {\n        let data = await response.json();\n        item.value = data.items;\n        oUid.value = item.value.IC._id;\n        selected.value = item.value.district;\n      } else if (response.status === 401) {\n        alert(response.statusText);\n        location.assign(\"/login\");\n      } else if (response.status === 403) {\n        alert(response.statusText);\n        history.back()\n      }\n    };\n\n    const fetchICs = async function () {\n      const response = await fetch(`/api/users/get/role/stationManager?printList=true`, {\n        headers: {\n          \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n        }\n      });\n      if (response.ok) {\n        let data = await response.json();\n        ics.value = data.items;\n        console.log(ics.value);\n      } else if (response.status === 401) {\n        alert(response.statusText);\n        history.back()\n      } else if (response.status === 403) {\n        alert(response.statusText);\n        history.back()\n      }\n    };\n\n    const getEid = function () {\n      eid.value = router.params.eid;\n    };\n\n    const getPath = function () {\n      let elements = router.path.split(\"/\");\n      path.value = \"/\" + elements[1];\n      for (let i = 2; i < elements.length - 1; i++) {\n        path.value += \"/\" + elements[i];\n      }\n    };\n\n    const submit = async function (event) {\n      event.preventDefault();\n      if (!updateForm.value) {\n        item.value.eid = eid.value;\n\n        await fetch(`/api/users/update/assigned/${item.value.IC._id}`, {\n          method: \"put\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n          },\n          body: JSON.stringify({ assigned: true }),\n        });\n\n        const response = await fetch(`/api/stations/create`, {\n          method: \"post\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify(item.value),\n\n        });\n        if (response.ok) {\n          alert(\"建立成功\");\n          window.location.replace(path.value);\n        } else {\n          alert(response.statusText);\n        }\n\n      } else {\n        const id = item.value._id;\n        delete item.value._id;\n\n        if (oUid.value !== item.value.IC._id) {\n          await fetch(`/api/users/update/assigned/${oUid.value}`, {\n            method: \"put\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n            },\n            body: JSON.stringify({ assigned: false }),\n          });\n\n          await fetch(`/api/users/update/assigned/${item.value.IC._id}`, {\n            method: \"put\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({ assigned: true }),\n          });\n\n        }\n\n        const response = await fetch(`/api/stations/update/${id}`, {\n          method: \"put\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n          },\n          body: JSON.stringify(item.value),\n        });\n\n        if (response.ok) {\n          alert(\"編輯成功\");\n          window.location.replace(path.value);\n        } else {\n          alert(response.statusText);\n        }\n\n      }\n    };\n\n    const deleteItem = async function (event) {\n      event.preventDefault();\n      let id = item.value._id;\n      if (confirm(\"確定刪除?\")) {\n        const response = await fetch(`/api/stations/delete/${id}`, {\n          method: \"delete\",\n          body: JSON.stringify(item.value),\n          headers: {\n            \"x-access-token\": `${localStorage.getItem(\"token\")}`,\n          }\n        });\n        console.log(\"line 158\");\n        if (response.ok) {\n          alert(\"項目已刪除\");\n          location.assign(path.value);\n        } else {\n          alert(response.statusText);\n        }\n      }\n    };\n\n    return {\n      districts,\n      updateForm,\n      selected,\n      submit,\n      deleteItem,\n      ics,\n      item\n    };\n  },\n};\n\n</script>\n<style scoped>\n.btn {\n  margin-right: 10px;\n}\n\n/* Test */\nbody {\n  color: #000;\n  overflow-x: hidden;\n  height: 100%;\n  /* background-image: url(\"https://i.imgur.com/GMmCQHC.png\"); */\n  background-repeat: no-repeat;\n  background-size: 100% 100%\n}\n\n.card {\n  padding: 30px 40px;\n  margin-top: 60px;\n  margin-bottom: 60px;\n  border: none !important;\n  box-shadow: 0 6px 12px 0 rgba(0, 0, 0, 0.2);\n}\n\n.blue-text {\n  color: #00BCD4\n}\n\n.form-control-label {\n  margin-bottom: 0\n}\n\ninput,\nselect,\ntextarea,\nbutton {\n  padding: 8px 15px;\n  border-radius: 5px !important;\n  margin: 5px 0px;\n  box-sizing: border-box;\n  border: 1px solid #ccc;\n  font-size: 18px !important;\n  font-weight: 300\n}\n\ninput:focus,\ntextarea:focus {\n  -moz-box-shadow: none !important;\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n  border: 1px solid #00BCD4;\n  outline-width: 0;\n  font-weight: 400\n}\n\n.btn-block {\n  text-transform: uppercase;\n  font-size: 15px !important;\n  font-weight: 400;\n  height: 43px;\n  cursor: pointer\n}\n\n.btn-block:hover {\n  color: #fff !important\n}\n\nbutton:focus {\n  -moz-box-shadow: none !important;\n  -webkit-box-shadow: none !important;\n  box-shadow: none !important;\n  outline-width: 0\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}