{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport { useRoute } from 'vue-router';\n// eslint-disable-next-line no-unused-vars\nimport { computed, ref } from 'vue';\nexport default {\n  name: 'BreadcrumbUI',\n  setup: function setup() {\n    var router = useRoute();\n    var eventName = ref(\"\");\n    var stationName = ref(\"\");\n    var volunteerName = ref(\"\");\n    var flagbagName = ref(\"\");\n    var fetchName = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id, object) {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"/api/\".concat(object, \"/get/\").concat(id));\n            case 2:\n              response = _context.sent;\n              if (!response.ok) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 6;\n              return response.json();\n            case 6:\n              data = _context.sent;\n              console.log(data.items);\n              return _context.abrupt(\"return\", data.items.name);\n            case 9:\n              return _context.abrupt(\"return\", '');\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function fetchName(_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var print = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"/api/flagbags/get\");\n            case 2:\n              response = _context2.sent;\n              if (!response.ok) {\n                _context2.next = 8;\n                break;\n              }\n              _context2.next = 6;\n              return response.json();\n            case 6:\n              data = _context2.sent;\n              return _context2.abrupt(\"return\", data.itemsWithoutPages._id);\n            case 8:\n              return _context2.abrupt(\"return\", '');\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function print() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    function populateDict() {\n      return _populateDict.apply(this, arguments);\n    }\n    function _populateDict() {\n      _populateDict = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!router.params.eid) {\n                _context3.next = 4;\n                break;\n              }\n              _context3.next = 3;\n              return fetchName(router.params.eid, \"events\");\n            case 3:\n              eventName.value = _context3.sent;\n            case 4:\n              if (!router.params.sid) {\n                _context3.next = 8;\n                break;\n              }\n              _context3.next = 7;\n              return fetchName(router.params.sid, \"stations\");\n            case 7:\n              stationName.value = _context3.sent;\n            case 8:\n              if (!router.params.vid) {\n                _context3.next = 12;\n                break;\n              }\n              _context3.next = 11;\n              return fetchName(router.params.vid, \"volunteers\");\n            case 11:\n              volunteerName.value = _context3.sent;\n            case 12:\n              if (!router.params.fid) {\n                _context3.next = 16;\n                break;\n              }\n              _context3.next = 15;\n              return fetchName(router.params.fid, \"flagbags\");\n            case 15:\n              flagbagName.value = _context3.sent;\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      return _populateDict.apply(this, arguments);\n    }\n    populateDict();\n    var items = computed(function () {\n      var items = [];\n      var dict = [{\n        name: '賣旗日',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: eventName.value + '活動詳情'\n      }, {\n        name: eventName.value + '的旗站',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: stationName.value + '旗站詳情'\n      }, {\n        name: stationName.value + '的義工',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: volunteerName.value + '義工詳情'\n      }, {\n        name: volunteerName.value + '的旗袋',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }, {\n          name: '印出',\n          onClick: generatePDF\n        }]\n      }, {\n        name: flagbagName.value + '旗袋詳情'\n      }];\n      var userDict = [{\n        name: '用戶',\n        buttons: [{\n          name: '建立',\n          next: 'create'\n        }]\n      }, {\n        name: '用戶詳情'\n      }];\n      var elements = router.path.split('/');\n      var length = elements.length - 1;\n      if (elements[1] == 'admin' || elements[1] == 'stationManager') {\n        dict = userDict;\n      }\n      var element = 1;\n      var path = '';\n      for (var i = 0; i < dict.length; i++) {\n        path += '/' + elements[element];\n        dict[i].path = path;\n        if (typeof dict[i].buttons != \"undefined\") {\n          for (var j = 0; j < dict[i].buttons.length; j++) {\n            dict[i].buttons[j].path = dict[i].path + '/' + dict[i].buttons[j].next;\n          }\n        }\n        element++;\n      }\n      items = dict.slice(0, length);\n      console.log(items);\n      return items;\n    });\n    return {\n      items: items,\n      fetchName: fetchName,\n      populateDict: populateDict\n    };\n  }\n};","map":{"version":3,"names":["useRoute","computed","ref","name","setup","router","eventName","stationName","volunteerName","flagbagName","fetchName","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","object","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","json","console","log","items","abrupt","stop","_x","_x2","apply","arguments","print","_ref2","_callee2","_callee2$","_context2","itemsWithoutPages","_id","populateDict","_populateDict","_callee3","_callee3$","_context3","params","eid","value","sid","vid","fid","dict","buttons","onClick","generatePDF","userDict","elements","path","split","length","element","i","j","slice"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/BreadcrumbUI.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex justify-content-between\">\n    <div class=\"d-flex align-items-center\">\n      <nav\n        aria-label=\"breadcrumb\"\n        class=\"d-flex align-items-center\"\n      >\n        <ol class=\"breadcrumb\">\n          <li\n            v-for=\"(item, index) in items\"\n            :key=\"index\"\n            class=\"breadcrumb-item\"\n          >\n            <a\n              v-if=\"items.length - 1 !== index\"\n              :href=\"item.path\"\n            >\n              {{ item.name }}\n            </a>\n            <a v-else>{{ item.name }}</a>\n          </li>\n        </ol>\n      </nav>\n    </div>\n\n    <div class=\"d-flex justify-content-end\">\n      <div \n        v-for=\"(item, index) in items[items.length - 1].buttons\"\n        :key=\"index\"\n      >\n        <router-link\n          v-slot=\"{ navigate }\"\n          :to=\"`${item.path}`\"\n          custom\n        >\n          <button\n            v-if=\"typeof item != 'undefined'\"\n            class=\"btn btn-sm btn-success\"\n            @click=\"navigate\"\n          >\n            {{ item.name }}\n          </button>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRoute } from 'vue-router'\n// eslint-disable-next-line no-unused-vars\nimport { computed, ref } from 'vue'\n\nexport default {\n  name: 'BreadcrumbUI',\n  setup() {\n    const router = useRoute()\n    let eventName = ref(\"\")\n    let stationName = ref(\"\")\n    let volunteerName = ref(\"\")\n    let flagbagName = ref(\"\")\n\n    const fetchName = async function (id, object)\n    {\n      const response = await fetch(`/api/${object}/get/${id}`);\n      if (response.ok) {\n        let data = await response.json();\n        console.log(data.items)\n        return data.items.name;  \n       }\n      return ''\n    };\n\n    const print = async function()\n    {\n      const response = await fetch(`/api/flagbags/get`);\n      if (response.ok) {\n        let data = await response.json();\n        return data.itemsWithoutPages._id;  \n       }\n      return ''\n    }\n\n    async function populateDict()\n    { \n      if (router.params.eid) {\n        eventName.value = await fetchName(router.params.eid, \"events\");\n      }\n      if (router.params.sid) {\n        stationName.value = await fetchName(router.params.sid, \"stations\");\n      }\n      if (router.params.vid) {\n        volunteerName.value = await fetchName(router.params.vid, \"volunteers\");\n      }\n      if (router.params.fid) {\n        flagbagName.value = await fetchName(router.params.fid, \"flagbags\");\n      }\n    }\n      \n    populateDict();\n\n    const items = computed(() => {\n      let items = [];\n\n\n        let dict = [{\n          name: '賣旗日',\n          buttons: [\n            {\n              name: '建立',\n              next: 'create'\n            }\n          ]\n        },\n        {\n          name: eventName.value + '活動詳情'\n        },\n        {\n          name: eventName.value + '的旗站',\n          buttons: [{\n            name: '建立',\n            next: 'create'\n          }]\n        },\n        {\n          name: stationName.value + '旗站詳情'\n        }\n          ,\n        {\n          name: stationName.value + '的義工',\n          buttons: [{\n            name: '建立',\n            next: 'create'\n          }]\n        },\n        {\n          name: volunteerName.value + '義工詳情',\n        },\n        {\n          name: volunteerName.value + '的旗袋',\n          buttons: [{\n            name: '建立',\n            next: 'create'\n          }, {\n            name: '印出',\n            onClick: generatePDF\n          }]\n        },\n        {\n          name: flagbagName.value + '旗袋詳情',\n        }\n        ];\n        \n        let userDict = [{\n          name: '用戶',\n          buttons: [\n            {\n              name: '建立',\n              next: 'create'\n            }\n          ]\n        }, {\n          name: '用戶詳情'\n        },]\n      \n\n      let elements = router.path.split('/')\n      let length = elements.length - 1;\n      if (elements[1] == 'admin' || elements[1] == 'stationManager') {\n        dict = userDict;\n      }\n\n      let element = 1;\n      let path = '';\n      for (let i = 0; i < dict.length; i++) {\n        path += '/' + elements[element];\n        dict[i].path = path;\n        if (typeof dict[i].buttons != \"undefined\") {\n          for (let j = 0; j < dict[i].buttons.length; j++) {\n            dict[i].buttons[j].path = dict[i].path + '/' + dict[i].buttons[j].next;\n          }\n        }\n        element++\n      }\n\n      items = dict.slice(0, length);\n      console.log(items)\n      return items;\n    })\n\n    \n\n    return {\n      items,\n      fetchName,\n      populateDict\n      \n      \n      \n    }\n  }\n}\n</script>\n\n<style scoped>\n.btn {\n  margin-right: 5px;\n}\n\n</style>\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}