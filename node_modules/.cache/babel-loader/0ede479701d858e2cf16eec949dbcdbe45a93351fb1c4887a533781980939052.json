{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport { onMounted, ref } from 'vue';\nimport QRCode from 'qrcode';\nexport default {\n  __name: 'QrCode',\n  props: {\n    data: {\n      type: Object,\n      required: true\n    }\n  },\n  setup: function setup(__props, _ref) {\n    var expose = _ref.expose;\n    expose();\n    var props = __props;\n    var src = ref(\"\");\n    var resolvedData = ref([]);\n    var isValidProps = ref(true);\n    onMounted( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return props.data;\n          case 3:\n            resolvedData.value = _context.sent;\n            _context.next = 6;\n            return QRCode.toDataURL(resolvedData.value._id, {\n              color: {\n                dark: '#000000',\n                light: '#ffffff'\n              }\n            });\n          case 6:\n            src.value = _context.sent;\n            console.log(resolvedData.value);\n            _context.next = 14;\n            break;\n          case 10:\n            _context.prev = 10;\n            _context.t0 = _context[\"catch\"](0);\n            isValidProps.value = false;\n            console.error(_context.t0);\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 10]]);\n    })));\n\n    // eslint-disable-next-line no-unused-vars\n    var printQrCode = function printQrCode() {\n      var qrcodeImg = document.createElement('img');\n      qrcodeImg.src = src.value;\n      var printWindow = window.open('', 'Print', 'height=400,width=600');\n      printWindow.document.write('<html><head><title>QRCode-' + resolvedData.value.name + ' ' + resolvedData.value._id + '</title></head><body>');\n      printWindow.document.write(qrcodeImg.outerHTML);\n      printWindow.document.write('</body></html>');\n      printWindow.document.close();\n      printWindow.focus();\n      printWindow.print();\n      //printWindow.close()\n    };\n\n    var __returned__ = {\n      props: props,\n      src: src,\n      resolvedData: resolvedData,\n      isValidProps: isValidProps,\n      printQrCode: printQrCode,\n      onMounted: onMounted,\n      ref: ref,\n      get QRCode() {\n        return QRCode;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","QRCode","src","resolvedData","isValidProps","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","props","data","value","sent","toDataURL","_id","color","dark","light","console","log","t0","error","stop","printQrCode","qrcodeImg","document","createElement","printWindow","window","open","write","name","outerHTML","close","focus","print"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/QrCode.vue"],"sourcesContent":["<script setup>\nimport { defineProps, onMounted, ref } from 'vue'\nimport QRCode from 'qrcode'\n\n\nconst props = defineProps({\n    data: {\n        type: Object,\n        required: true\n    }\n    \n    \n});\n\nconst src = ref(\"\");\nconst resolvedData = ref([]);\nconst isValidProps = ref(true);\n\n\n\nonMounted(async () => {\n \n   try {\n        resolvedData.value = await props.data;\n        src.value = await QRCode.toDataURL(resolvedData.value._id, {\n          color: {\n            dark: '#000000',\n            light: '#ffffff'\n          }\n        });\n        console.log(resolvedData.value)\n    } catch (error) {\n        isValidProps.value = false;\n        console.error(error);\n    }\n  \n});\n\n// eslint-disable-next-line no-unused-vars\nconst printQrCode = function() {\n  const qrcodeImg = document.createElement('img')\n  qrcodeImg.src = src.value\n  const printWindow = window.open('', 'Print', 'height=400,width=600')\n  printWindow.document.write('<html><head><title>QRCode-'+ resolvedData.value.name +' '+ resolvedData.value._id +'</title></head><body>')\n  printWindow.document.write(qrcodeImg.outerHTML)\n  printWindow.document.write('</body></html>')\n  printWindow.document.close()\n  printWindow.focus()\n  printWindow.print()\n  //printWindow.close()\n}\n\n\n</script>\n\n<template>\n  <div v-if=\"isValidProps\">\n    <img :src=\"src\" ref=\"qrcodeImg\" @click=\"printQrCode\" style=\"cursor: pointer;\" />\n    <li class=\"list-group-item fw-bold h6\" \n    :class=\"{  'text-danger': (resolvedData.flagStatus ? resolvedData.flagStatus.status : 'N/A' )=== 'not-issued',\n                'text-success': (resolvedData.flagStatus ? resolvedData.flagStatus.status : 'N/A') === 'received',\n                'text-primary': (resolvedData.flagStatus ? resolvedData.flagStatus.status : 'N/A') === 'issued'}\">\n        旗袋狀態: {{ resolvedData.flagStatus ? resolvedData.flagStatus.name : 'N/A' }}\n    </li>\n  </div>\n</template>\n"],"mappings":";;;;AACA,SAAsBA,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACjD,OAAOC,MAAM,MAAM,QAAQ;;;;;;;;;;;;;IAY3B,IAAMC,GAAG,GAAGF,GAAG,CAAC,EAAE,CAAC;IACnB,IAAMG,YAAY,GAAGH,GAAG,CAAC,EAAE,CAAC;IAC5B,IAAMI,YAAY,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAI9BD,SAAS,eAAAM,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAC,SAAAC,QAAA;MAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAE,IAAA;YAAA,OAGyBC,KAAK,CAACC,IAAI;UAAA;YAArCZ,YAAY,CAACa,KAAK,GAAAL,QAAA,CAAAM,IAAA;YAAAN,QAAA,CAAAE,IAAA;YAAA,OACAZ,MAAM,CAACiB,SAAS,CAACf,YAAY,CAACa,KAAK,CAACG,GAAG,EAAE;cACzDC,KAAK,EAAE;gBACLC,IAAI,EAAE,SAAS;gBACfC,KAAK,EAAE;cACT;YACF,CAAC,CAAC;UAAA;YALFpB,GAAG,CAACc,KAAK,GAAAL,QAAA,CAAAM,IAAA;YAMTM,OAAO,CAACC,GAAG,CAACrB,YAAY,CAACa,KAAK,CAAC;YAAAL,QAAA,CAAAE,IAAA;YAAA;UAAA;YAAAF,QAAA,CAAAC,IAAA;YAAAD,QAAA,CAAAc,EAAA,GAAAd,QAAA;YAE/BP,YAAY,CAACY,KAAK,GAAG,KAAK;YAC1BO,OAAO,CAACG,KAAK,CAAAf,QAAA,CAAAc,EAAA,CAAO;UAAC;UAAA;YAAA,OAAAd,QAAA,CAAAgB,IAAA;QAAA;MAAA,GAAAnB,OAAA;IAAA,CAG5B,GAAC;;IAEF;IACA,IAAMoB,WAAW,GAAG,SAAdA,WAAWA,CAAA,EAAc;MAC7B,IAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MAC/CF,SAAS,CAAC3B,GAAG,GAAGA,GAAG,CAACc,KAAK;MACzB,IAAMgB,WAAW,GAAGC,MAAM,CAACC,IAAI,CAAC,EAAE,EAAE,OAAO,EAAE,sBAAsB,CAAC;MACpEF,WAAW,CAACF,QAAQ,CAACK,KAAK,CAAC,4BAA4B,GAAEhC,YAAY,CAACa,KAAK,CAACoB,IAAI,GAAE,GAAG,GAAEjC,YAAY,CAACa,KAAK,CAACG,GAAG,GAAE,uBAAuB,CAAC;MACvIa,WAAW,CAACF,QAAQ,CAACK,KAAK,CAACN,SAAS,CAACQ,SAAS,CAAC;MAC/CL,WAAW,CAACF,QAAQ,CAACK,KAAK,CAAC,gBAAgB,CAAC;MAC5CH,WAAW,CAACF,QAAQ,CAACQ,KAAK,EAAE;MAC5BN,WAAW,CAACO,KAAK,EAAE;MACnBP,WAAW,CAACQ,KAAK,EAAE;MACnB;IACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}