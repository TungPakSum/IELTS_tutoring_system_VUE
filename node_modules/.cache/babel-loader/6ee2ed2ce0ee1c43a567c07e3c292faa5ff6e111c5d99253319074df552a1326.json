{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport { useRoute } from \"vue-router\";\nimport { computed, ref, getCurrentInstance } from \"vue\";\nexport default {\n  name: \"BreadcrumbUI\",\n  setup: function setup() {\n    var router = useRoute();\n    var eventName = ref(\"\");\n    var stationName = ref(\"\");\n    var volunteerName = ref(\"\");\n    var flagbagName = ref(\"\");\n    var instance = getCurrentInstance();\n    var fetchName = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id, object) {\n        var response, data;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"/api/\".concat(object, \"/get/\").concat(id));\n            case 2:\n              response = _context.sent;\n              if (!response.ok) {\n                _context.next = 9;\n                break;\n              }\n              _context.next = 6;\n              return response.json();\n            case 6:\n              data = _context.sent;\n              console.log(data.items);\n              return _context.abrupt(\"return\", data.items.name);\n            case 9:\n              return _context.abrupt(\"return\", \"\");\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function fetchName(_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var handlePrintQrCodes = function handlePrintQrCodes() {\n      instance.emit('printQrCodes');\n    };\n    function populateDict() {\n      return _populateDict.apply(this, arguments);\n    }\n    function _populateDict() {\n      _populateDict = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!router.params.eid) {\n                _context2.next = 4;\n                break;\n              }\n              _context2.next = 3;\n              return fetchName(router.params.eid, \"events\");\n            case 3:\n              eventName.value = _context2.sent;\n            case 4:\n              if (!router.params.sid) {\n                _context2.next = 8;\n                break;\n              }\n              _context2.next = 7;\n              return fetchName(router.params.sid, \"stations\");\n            case 7:\n              stationName.value = _context2.sent;\n            case 8:\n              if (!router.params.vid) {\n                _context2.next = 12;\n                break;\n              }\n              _context2.next = 11;\n              return fetchName(router.params.vid, \"volunteers\");\n            case 11:\n              volunteerName.value = _context2.sent;\n            case 12:\n              if (!router.params.fid) {\n                _context2.next = 16;\n                break;\n              }\n              _context2.next = 15;\n              return fetchName(router.params.fid, \"flagbags\");\n            case 15:\n              flagbagName.value = _context2.sent;\n            case 16:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return _populateDict.apply(this, arguments);\n    }\n    populateDict();\n    var items = computed(function () {\n      var items = [];\n      var dict = [{\n        name: \"賣旗日\",\n        buttons: [{\n          name: \"建立\",\n          next: \"create\"\n        }]\n      }, {\n        name: eventName.value + \"活動詳情\"\n      }, {\n        name: eventName.value + \"的旗站\",\n        buttons: [{\n          name: \"建立\",\n          next: \"create\"\n        }]\n      }, {\n        name: stationName.value + \"旗站詳情\"\n      }, {\n        name: stationName.value + \"的義工\",\n        buttons: [{\n          name: \"建立\",\n          next: \"create\"\n        }]\n      }, {\n        name: volunteerName.value + \"義工詳情\"\n      }, {\n        name: volunteerName.value + \"的旗袋\",\n        buttons: [{\n          name: \"建立\",\n          next: \"create\"\n        }, {\n          name: \"印出\",\n          next: handlePrintQrCodes()\n        }]\n      }, {\n        name: flagbagName.value + \"旗袋詳情\"\n      }];\n      var userDict = [{\n        name: \"用戶\",\n        buttons: [{\n          name: \"建立\",\n          next: \"create\"\n        }]\n      }, {\n        name: \"用戶詳情\"\n      }];\n      var elements = router.path.split(\"/\");\n      var length = elements.length - 1;\n      if (elements[1] == \"admin\" || elements[1] == \"stationManager\") {\n        dict = userDict;\n      }\n      var element = 1;\n      var path = \"\";\n      for (var i = 0; i < dict.length; i++) {\n        path += \"/\" + elements[element];\n        dict[i].path = path;\n        if (typeof dict[i].buttons != \"undefined\") {\n          for (var j = 0; j < dict[i].buttons.length; j++) {\n            dict[i].buttons[j].path = dict[i].path + \"/\" + dict[i].buttons[j].next;\n          }\n        }\n        element++;\n      }\n      items = dict.slice(0, length);\n      console.log(items);\n      return items;\n    });\n    return {\n      items: items,\n      fetchName: fetchName,\n      populateDict: populateDict,\n      handlePrintQrCodes: handlePrintQrCodes\n    };\n  }\n};","map":{"version":3,"names":["useRoute","computed","ref","getCurrentInstance","name","setup","router","eventName","stationName","volunteerName","flagbagName","instance","fetchName","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","object","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","json","console","log","items","abrupt","stop","_x","_x2","apply","arguments","handlePrintQrCodes","emit","populateDict","_populateDict","_callee2","_callee2$","_context2","params","eid","value","sid","vid","fid","dict","buttons","userDict","elements","path","split","length","element","i","j","slice"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/BreadcrumbUI.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex justify-content-between\">\n    <div class=\"d-flex align-items-center\">\n      <nav aria-label=\"breadcrumb\" class=\"d-flex align-items-center\">\n        <ol class=\"breadcrumb\">\n          <li\n            v-for=\"(item, index) in items\"\n            :key=\"index\"\n            class=\"breadcrumb-item\"\n          >\n            <a v-if=\"items.length - 1 !== index\" :href=\"item.path\">\n              {{ item.name }}\n            </a>\n            <a v-else>{{ item.name }}</a>\n          </li>\n        </ol>\n      </nav>\n    </div>\n\n    <div class=\"d-flex justify-content-end\">\n      <div\n        v-for=\"(item, index) in items[items.length - 1].buttons\"\n        :key=\"index\"\n      >\n        <router-link v-slot=\"{ navigate }\" :to=\"`${item.path}`\" custom>\n          <button\n            v-if=\"typeof item != 'undefined'\"\n            class=\"btn btn-sm btn-success\"\n            @click=\"navigate\"\n          >{{ item.name }}\n          </button>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useRoute } from \"vue-router\";\nimport { computed, ref , getCurrentInstance} from \"vue\";\n\nexport default {\n  \n  name: \"BreadcrumbUI\",\n  setup() {\n    const router = useRoute();\n    let eventName = ref(\"\");\n    let stationName = ref(\"\");\n    let volunteerName = ref(\"\");\n    let flagbagName = ref(\"\");\n    const instance = getCurrentInstance();\n\n    \n\n    const fetchName = async function (id, object) {\n      const response = await fetch(`/api/${object}/get/${id}`);\n      if (response.ok) {\n        let data = await response.json();\n        console.log(data.items);\n        return data.items.name;\n      }\n      return \"\";\n    };\n\n    const handlePrintQrCodes = function() {\n      instance.emit('printQrCodes');\n  }\n\n    async function populateDict() {\n      if (router.params.eid) {\n        eventName.value = await fetchName(router.params.eid, \"events\");\n      }\n      if (router.params.sid) {\n        stationName.value = await fetchName(router.params.sid, \"stations\");\n      }\n      if (router.params.vid) {\n        volunteerName.value = await fetchName(router.params.vid, \"volunteers\");\n      }\n      if (router.params.fid) {\n        flagbagName.value = await fetchName(router.params.fid, \"flagbags\");\n      }\n    }\n\n    populateDict();\n\n    const items = computed(() => {\n      let items = [];\n\n      let dict = [\n        {\n          name: \"賣旗日\",\n          buttons: [\n            {\n              name: \"建立\",\n              next: \"create\",\n            },\n          ],\n        },\n        {\n          name: eventName.value + \"活動詳情\",\n        },\n        {\n          name: eventName.value + \"的旗站\",\n          buttons: [\n            {\n              name: \"建立\",\n              next: \"create\",\n            },\n          ],\n        },\n        {\n          name: stationName.value + \"旗站詳情\",\n        },\n        {\n          name: stationName.value + \"的義工\",\n          buttons: [\n            {\n              name: \"建立\",\n              next: \"create\",\n            },\n          ],\n        },\n        {\n          name: volunteerName.value + \"義工詳情\",\n        },\n        {\n          name: volunteerName.value + \"的旗袋\",\n          buttons: [\n            {\n              name: \"建立\",\n              next: \"create\",\n            },\n            {\n              name: \"印出\",\n              next: handlePrintQrCodes(),\n            },\n          ],\n        },\n        {\n          name: flagbagName.value + \"旗袋詳情\",\n        },\n      ];\n\n      let userDict = [\n        {\n          name: \"用戶\",\n          buttons: [\n            {\n              name: \"建立\",\n              next: \"create\",\n            },\n          ],\n        },\n        {\n          name: \"用戶詳情\",\n        },\n      ];\n\n      let elements = router.path.split(\"/\");\n      let length = elements.length - 1;\n      if (elements[1] == \"admin\" || elements[1] == \"stationManager\") {\n        dict = userDict;\n      }\n\n      let element = 1;\n      let path = \"\";\n      for (let i = 0; i < dict.length; i++) {\n        path += \"/\" + elements[element];\n        dict[i].path = path;\n        if (typeof dict[i].buttons != \"undefined\") {\n          for (let j = 0; j < dict[i].buttons.length; j++) {\n            dict[i].buttons[j].path =\n              dict[i].path + \"/\" + dict[i].buttons[j].next;\n          }\n        }\n        element++;\n      }\n\n      items = dict.slice(0, length);\n      console.log(items);\n      return items;\n    });\n\n    return {\n      items,\n      fetchName,\n      populateDict,\n      handlePrintQrCodes\n    };\n  },\n};\n</script>\n\n<style scoped>\n.btn {\n  margin-right: 5px;\n}\n</style>\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}