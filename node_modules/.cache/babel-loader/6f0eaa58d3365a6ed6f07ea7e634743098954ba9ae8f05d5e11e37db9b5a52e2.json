{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport { Html5QrcodeConstants, Html5QrcodeScanType, Html5QrcodeErrorFactory, BaseLoggger, isNullOrUndefined, clip } from \"./core\";\nimport { Html5Qrcode } from \"./html5-qrcode\";\nimport { Html5QrcodeScannerStrings } from \"./strings\";\nimport { ASSET_FILE_SCAN, ASSET_CAMERA_SCAN } from \"./image-assets\";\nimport { PersistedDataManager } from \"./storage\";\nimport { LibraryInfoContainer } from \"./ui\";\nimport { CameraPermissions } from \"./camera/permissions\";\nimport { ScanTypeSelector } from \"./ui/scanner/scan-type-selector\";\nimport { TorchButton } from \"./ui/scanner/torch-button\";\nimport { FileSelectionUi } from \"./ui/scanner/file-selection-ui\";\nimport { BaseUiElementFactory, PublicUiElementIdAndClasses } from \"./ui/scanner/base\";\nimport { CameraSelectionUi } from \"./ui/scanner/camera-selection-ui\";\nimport { CameraZoomUi } from \"./ui/scanner/camera-zoom-ui\";\nvar Html5QrcodeScannerStatus;\n(function (Html5QrcodeScannerStatus) {\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_DEFAULT\"] = 0] = \"STATUS_DEFAULT\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_SUCCESS\"] = 1] = \"STATUS_SUCCESS\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_WARNING\"] = 2] = \"STATUS_WARNING\";\n  Html5QrcodeScannerStatus[Html5QrcodeScannerStatus[\"STATUS_REQUESTING_PERMISSION\"] = 3] = \"STATUS_REQUESTING_PERMISSION\";\n})(Html5QrcodeScannerStatus || (Html5QrcodeScannerStatus = {}));\nfunction toHtml5QrcodeCameraScanConfig(config) {\n  return {\n    fps: config.fps,\n    qrbox: config.qrbox,\n    aspectRatio: config.aspectRatio,\n    disableFlip: config.disableFlip,\n    videoConstraints: config.videoConstraints\n  };\n}\nfunction toHtml5QrcodeFullConfig(config, verbose) {\n  return {\n    formatsToSupport: config.formatsToSupport,\n    useBarCodeDetectorIfSupported: config.useBarCodeDetectorIfSupported,\n    experimentalFeatures: config.experimentalFeatures,\n    verbose: verbose\n  };\n}\nvar Html5QrcodeScanner = function () {\n  function Html5QrcodeScanner(elementId, config, verbose) {\n    this.lastMatchFound = null;\n    this.cameraScanImage = null;\n    this.fileScanImage = null;\n    this.fileSelectionUi = null;\n    this.elementId = elementId;\n    this.config = this.createConfig(config);\n    this.verbose = verbose === true;\n    if (!document.getElementById(elementId)) {\n      throw \"HTML Element with id=\" + elementId + \" not found\";\n    }\n    this.scanTypeSelector = new ScanTypeSelector(this.config.supportedScanTypes);\n    this.currentScanType = this.scanTypeSelector.getDefaultScanType();\n    this.sectionSwapAllowed = true;\n    this.logger = new BaseLoggger(this.verbose);\n    this.persistedDataManager = new PersistedDataManager();\n    if (config.rememberLastUsedCamera !== true) {\n      this.persistedDataManager.reset();\n    }\n  }\n  Html5QrcodeScanner.prototype.render = function (qrCodeSuccessCallback, qrCodeErrorCallback) {\n    var _this = this;\n    this.lastMatchFound = null;\n    this.qrCodeSuccessCallback = function (decodedText, result) {\n      if (qrCodeSuccessCallback) {\n        qrCodeSuccessCallback(decodedText, result);\n      } else {\n        if (_this.lastMatchFound === decodedText) {\n          return;\n        }\n        _this.lastMatchFound = decodedText;\n        _this.setHeaderMessage(Html5QrcodeScannerStrings.lastMatch(decodedText), Html5QrcodeScannerStatus.STATUS_SUCCESS);\n      }\n    };\n    this.qrCodeErrorCallback = function (errorMessage, error) {\n      if (qrCodeErrorCallback) {\n        qrCodeErrorCallback(errorMessage, error);\n      }\n    };\n    var container = document.getElementById(this.elementId);\n    if (!container) {\n      throw \"HTML Element with id=\" + this.elementId + \" not found\";\n    }\n    container.innerHTML = \"\";\n    this.createBasicLayout(container);\n    this.html5Qrcode = new Html5Qrcode(this.getScanRegionId(), toHtml5QrcodeFullConfig(this.config, this.verbose));\n  };\n  Html5QrcodeScanner.prototype.pause = function (shouldPauseVideo) {\n    if (isNullOrUndefined(shouldPauseVideo) || shouldPauseVideo !== true) {\n      shouldPauseVideo = false;\n    }\n    this.getHtml5QrcodeOrFail().pause(shouldPauseVideo);\n  };\n  Html5QrcodeScanner.prototype.resume = function () {\n    this.getHtml5QrcodeOrFail().resume();\n  };\n  Html5QrcodeScanner.prototype.getState = function () {\n    return this.getHtml5QrcodeOrFail().getState();\n  };\n  Html5QrcodeScanner.prototype.clear = function () {\n    var _this = this;\n    var emptyHtmlContainer = function emptyHtmlContainer() {\n      var mainContainer = document.getElementById(_this.elementId);\n      if (mainContainer) {\n        mainContainer.innerHTML = \"\";\n        _this.resetBasicLayout(mainContainer);\n      }\n    };\n    if (this.html5Qrcode) {\n      return new Promise(function (resolve, reject) {\n        if (!_this.html5Qrcode) {\n          resolve();\n          return;\n        }\n        if (_this.html5Qrcode.isScanning) {\n          _this.html5Qrcode.stop().then(function (_) {\n            if (!_this.html5Qrcode) {\n              resolve();\n              return;\n            }\n            _this.html5Qrcode.clear();\n            emptyHtmlContainer();\n            resolve();\n          })[\"catch\"](function (error) {\n            if (_this.verbose) {\n              _this.logger.logError(\"Unable to stop qrcode scanner\", error);\n            }\n            reject(error);\n          });\n        } else {\n          _this.html5Qrcode.clear();\n          emptyHtmlContainer();\n          resolve();\n        }\n      });\n    }\n    return Promise.resolve();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackCapabilities = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities();\n  };\n  Html5QrcodeScanner.prototype.getRunningTrackSettings = function () {\n    return this.getHtml5QrcodeOrFail().getRunningTrackSettings();\n  };\n  Html5QrcodeScanner.prototype.applyVideoConstraints = function (videoConstaints) {\n    return this.getHtml5QrcodeOrFail().applyVideoConstraints(videoConstaints);\n  };\n  Html5QrcodeScanner.prototype.getHtml5QrcodeOrFail = function () {\n    if (!this.html5Qrcode) {\n      throw \"Code scanner not initialized.\";\n    }\n    return this.html5Qrcode;\n  };\n  Html5QrcodeScanner.prototype.createConfig = function (config) {\n    if (config) {\n      if (!config.fps) {\n        config.fps = Html5QrcodeConstants.SCAN_DEFAULT_FPS;\n      }\n      if (config.rememberLastUsedCamera !== !Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED) {\n        config.rememberLastUsedCamera = Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED;\n      }\n      if (!config.supportedScanTypes) {\n        config.supportedScanTypes = Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE;\n      }\n      return config;\n    }\n    return {\n      fps: Html5QrcodeConstants.SCAN_DEFAULT_FPS,\n      rememberLastUsedCamera: Html5QrcodeConstants.DEFAULT_REMEMBER_LAST_CAMERA_USED,\n      supportedScanTypes: Html5QrcodeConstants.DEFAULT_SUPPORTED_SCAN_TYPE\n    };\n  };\n  Html5QrcodeScanner.prototype.createBasicLayout = function (parent) {\n    parent.style.position = \"relative\";\n    parent.style.padding = \"0px\";\n    parent.style.border = \"1px solid silver\";\n    this.createHeader(parent);\n    var qrCodeScanRegion = document.createElement(\"div\");\n    var scanRegionId = this.getScanRegionId();\n    qrCodeScanRegion.id = scanRegionId;\n    qrCodeScanRegion.style.width = \"100%\";\n    qrCodeScanRegion.style.minHeight = \"100px\";\n    qrCodeScanRegion.style.textAlign = \"center\";\n    parent.appendChild(qrCodeScanRegion);\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType)) {\n      this.insertCameraScanImageToScanRegion();\n    } else {\n      this.insertFileScanImageToScanRegion();\n    }\n    var qrCodeDashboard = document.createElement(\"div\");\n    var dashboardId = this.getDashboardId();\n    qrCodeDashboard.id = dashboardId;\n    qrCodeDashboard.style.width = \"100%\";\n    parent.appendChild(qrCodeDashboard);\n    this.setupInitialDashboard(qrCodeDashboard);\n  };\n  Html5QrcodeScanner.prototype.resetBasicLayout = function (mainContainer) {\n    mainContainer.style.border = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setupInitialDashboard = function (dashboard) {\n    var $this = this;\n    this.createSection(dashboard);\n    this.createSectionControlPanel();\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      this.createSectionSwap();\n    }\n  };\n  Html5QrcodeScanner.prototype.createHeader = function (dashboard) {\n    var header = document.createElement(\"div\");\n    header.style.textAlign = \"left\";\n    header.style.margin = \"0px\";\n    dashboard.appendChild(header);\n    var libraryInfo = new LibraryInfoContainer();\n    libraryInfo.renderInto(header);\n    var headerMessageContainer = document.createElement(\"div\");\n    headerMessageContainer.id = this.getHeaderMessageContainerId();\n    headerMessageContainer.style.display = \"none\";\n    headerMessageContainer.style.textAlign = \"center\";\n    headerMessageContainer.style.fontSize = \"14px\";\n    headerMessageContainer.style.padding = \"2px 10px\";\n    headerMessageContainer.style.margin = \"4px\";\n    headerMessageContainer.style.borderTop = \"1px solid #f6f6f6\";\n    header.appendChild(headerMessageContainer);\n  };\n  Html5QrcodeScanner.prototype.createSection = function (dashboard) {\n    var section = document.createElement(\"div\");\n    section.id = this.getDashboardSectionId();\n    section.style.width = \"100%\";\n    section.style.padding = \"10px 0px 10px 0px\";\n    section.style.textAlign = \"left\";\n    dashboard.appendChild(section);\n  };\n  Html5QrcodeScanner.prototype.createCameraListUi = function (scpCameraScanRegion, requestPermissionContainer, requestPermissionButton) {\n    var $this = this;\n    $this.showHideScanTypeSwapLink(false);\n    $this.setHeaderMessage(Html5QrcodeScannerStrings.cameraPermissionRequesting());\n    var createPermissionButtonIfNotExists = function createPermissionButtonIfNotExists() {\n      if (!requestPermissionButton) {\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      }\n    };\n    Html5Qrcode.getCameras().then(function (cameras) {\n      $this.persistedDataManager.setHasPermission(true);\n      $this.showHideScanTypeSwapLink(true);\n      $this.resetHeaderMessage();\n      if (cameras && cameras.length > 0) {\n        scpCameraScanRegion.removeChild(requestPermissionContainer);\n        $this.renderCameraSelection(cameras);\n      } else {\n        $this.setHeaderMessage(Html5QrcodeScannerStrings.noCameraFound(), Html5QrcodeScannerStatus.STATUS_WARNING);\n        createPermissionButtonIfNotExists();\n      }\n    })[\"catch\"](function (error) {\n      $this.persistedDataManager.setHasPermission(false);\n      if (requestPermissionButton) {\n        requestPermissionButton.disabled = false;\n      } else {\n        createPermissionButtonIfNotExists();\n      }\n      $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      $this.showHideScanTypeSwapLink(true);\n    });\n  };\n  Html5QrcodeScanner.prototype.createPermissionButton = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    var requestPermissionButton = BaseUiElementFactory.createElement(\"button\", this.getCameraPermissionButtonId());\n    requestPermissionButton.innerText = Html5QrcodeScannerStrings.cameraPermissionTitle();\n    requestPermissionButton.addEventListener(\"click\", function () {\n      requestPermissionButton.disabled = true;\n      $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer, requestPermissionButton);\n    });\n    requestPermissionContainer.appendChild(requestPermissionButton);\n  };\n  Html5QrcodeScanner.prototype.createPermissionsUi = function (scpCameraScanRegion, requestPermissionContainer) {\n    var $this = this;\n    if (ScanTypeSelector.isCameraScanType(this.currentScanType) && this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          $this.createCameraListUi(scpCameraScanRegion, requestPermissionContainer);\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n          $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n        }\n      })[\"catch\"](function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n        $this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n      });\n      return;\n    }\n    this.createPermissionButton(scpCameraScanRegion, requestPermissionContainer);\n  };\n  Html5QrcodeScanner.prototype.createSectionControlPanel = function () {\n    var $this = this;\n    var section = document.getElementById(this.getDashboardSectionId());\n    var sectionControlPanel = document.createElement(\"div\");\n    section.appendChild(sectionControlPanel);\n    var scpCameraScanRegion = document.createElement(\"div\");\n    scpCameraScanRegion.id = this.getDashboardSectionCameraScanRegionId();\n    scpCameraScanRegion.style.display = ScanTypeSelector.isCameraScanType(this.currentScanType) ? \"block\" : \"none\";\n    sectionControlPanel.appendChild(scpCameraScanRegion);\n    var requestPermissionContainer = document.createElement(\"div\");\n    requestPermissionContainer.style.textAlign = \"center\";\n    scpCameraScanRegion.appendChild(requestPermissionContainer);\n    if (this.scanTypeSelector.isCameraScanRequired()) {\n      this.createPermissionsUi(scpCameraScanRegion, requestPermissionContainer);\n    }\n    this.renderFileScanUi(sectionControlPanel);\n  };\n  Html5QrcodeScanner.prototype.renderFileScanUi = function (parent) {\n    var showOnRender = ScanTypeSelector.isFileScanType(this.currentScanType);\n    var $this = this;\n    var onFileSelected = function onFileSelected(file) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      if (!ScanTypeSelector.isFileScanType($this.currentScanType)) {\n        return;\n      }\n      $this.setHeaderMessage(Html5QrcodeScannerStrings.loadingImage());\n      $this.html5Qrcode.scanFileV2(file, true).then(function (html5qrcodeResult) {\n        $this.resetHeaderMessage();\n        $this.qrCodeSuccessCallback(html5qrcodeResult.decodedText, html5qrcodeResult);\n      })[\"catch\"](function (error) {\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n        $this.qrCodeErrorCallback(error, Html5QrcodeErrorFactory.createFrom(error));\n      });\n    };\n    this.fileSelectionUi = FileSelectionUi.create(parent, showOnRender, onFileSelected);\n  };\n  Html5QrcodeScanner.prototype.renderCameraSelection = function (cameras) {\n    var _this = this;\n    var $this = this;\n    var scpCameraScanRegion = document.getElementById(this.getDashboardSectionCameraScanRegionId());\n    scpCameraScanRegion.style.textAlign = \"center\";\n    var cameraZoomUi = CameraZoomUi.create(scpCameraScanRegion, false);\n    var renderCameraZoomUiIfSupported = function renderCameraZoomUiIfSupported(cameraCapabilities) {\n      var zoomCapability = cameraCapabilities.zoomFeature();\n      if (!zoomCapability.isSupported()) {\n        return;\n      }\n      cameraZoomUi.setOnCameraZoomValueChangeCallback(function (zoomValue) {\n        zoomCapability.apply(zoomValue);\n      });\n      var defaultZoom = 1;\n      if (_this.config.defaultZoomValueIfSupported) {\n        defaultZoom = _this.config.defaultZoomValueIfSupported;\n      }\n      defaultZoom = clip(defaultZoom, zoomCapability.min(), zoomCapability.max());\n      cameraZoomUi.setValues(zoomCapability.min(), zoomCapability.max(), defaultZoom, zoomCapability.step());\n      cameraZoomUi.show();\n    };\n    var cameraSelectUi = CameraSelectionUi.create(scpCameraScanRegion, cameras);\n    var cameraActionContainer = document.createElement(\"span\");\n    var cameraActionStartButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_START_BUTTON_ID);\n    cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n    cameraActionContainer.appendChild(cameraActionStartButton);\n    var cameraActionStopButton = BaseUiElementFactory.createElement(\"button\", PublicUiElementIdAndClasses.CAMERA_STOP_BUTTON_ID);\n    cameraActionStopButton.innerText = Html5QrcodeScannerStrings.scanButtonStopScanningText();\n    cameraActionStopButton.style.display = \"none\";\n    cameraActionStopButton.disabled = true;\n    cameraActionContainer.appendChild(cameraActionStopButton);\n    var torchButton;\n    var createAndShowTorchButtonIfSupported = function createAndShowTorchButtonIfSupported(cameraCapabilities) {\n      if (!cameraCapabilities.torchFeature().isSupported()) {\n        if (torchButton) {\n          torchButton.hide();\n        }\n        return;\n      }\n      if (!torchButton) {\n        torchButton = TorchButton.create(cameraActionContainer, cameraCapabilities.torchFeature(), {\n          display: \"none\",\n          marginLeft: \"5px\"\n        }, function (errorMessage) {\n          $this.setHeaderMessage(errorMessage, Html5QrcodeScannerStatus.STATUS_WARNING);\n        });\n      } else {\n        torchButton.updateTorchCapability(cameraCapabilities.torchFeature());\n      }\n      torchButton.show();\n    };\n    scpCameraScanRegion.appendChild(cameraActionContainer);\n    var resetCameraActionStartButton = function resetCameraActionStartButton(shouldShow) {\n      if (!shouldShow) {\n        cameraActionStartButton.style.display = \"none\";\n      }\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonStartScanningText();\n      cameraActionStartButton.style.opacity = \"1\";\n      cameraActionStartButton.disabled = false;\n      if (shouldShow) {\n        cameraActionStartButton.style.display = \"inline-block\";\n      }\n    };\n    cameraActionStartButton.addEventListener(\"click\", function (_) {\n      cameraActionStartButton.innerText = Html5QrcodeScannerStrings.scanButtonScanningStarting();\n      cameraSelectUi.disable();\n      cameraActionStartButton.disabled = true;\n      cameraActionStartButton.style.opacity = \"0.5\";\n      if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n        $this.showHideScanTypeSwapLink(false);\n      }\n      $this.resetHeaderMessage();\n      var cameraId = cameraSelectUi.getValue();\n      $this.persistedDataManager.setLastUsedCameraId(cameraId);\n      $this.html5Qrcode.start(cameraId, toHtml5QrcodeCameraScanConfig($this.config), $this.qrCodeSuccessCallback, $this.qrCodeErrorCallback).then(function (_) {\n        cameraActionStopButton.disabled = false;\n        cameraActionStopButton.style.display = \"inline-block\";\n        resetCameraActionStartButton(false);\n        var cameraCapabilities = $this.html5Qrcode.getRunningTrackCameraCapabilities();\n        if (_this.config.showTorchButtonIfSupported === true) {\n          createAndShowTorchButtonIfSupported(cameraCapabilities);\n        }\n        if (_this.config.showZoomSliderIfSupported === true) {\n          renderCameraZoomUiIfSupported(cameraCapabilities);\n        }\n      })[\"catch\"](function (error) {\n        $this.showHideScanTypeSwapLink(true);\n        cameraSelectUi.enable();\n        resetCameraActionStartButton(true);\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if (cameraSelectUi.hasSingleItem()) {\n      cameraActionStartButton.click();\n    }\n    cameraActionStopButton.addEventListener(\"click\", function (_) {\n      if (!$this.html5Qrcode) {\n        throw \"html5Qrcode not defined\";\n      }\n      cameraActionStopButton.disabled = true;\n      $this.html5Qrcode.stop().then(function (_) {\n        if (_this.scanTypeSelector.hasMoreThanOneScanType()) {\n          $this.showHideScanTypeSwapLink(true);\n        }\n        cameraSelectUi.enable();\n        cameraActionStartButton.disabled = false;\n        cameraActionStopButton.style.display = \"none\";\n        cameraActionStartButton.style.display = \"inline-block\";\n        if (torchButton) {\n          torchButton.reset();\n          torchButton.hide();\n        }\n        cameraZoomUi.removeOnCameraZoomValueChangeCallback();\n        cameraZoomUi.hide();\n        $this.insertCameraScanImageToScanRegion();\n      })[\"catch\"](function (error) {\n        cameraActionStopButton.disabled = false;\n        $this.setHeaderMessage(error, Html5QrcodeScannerStatus.STATUS_WARNING);\n      });\n    });\n    if ($this.persistedDataManager.getLastUsedCameraId()) {\n      var cameraId = $this.persistedDataManager.getLastUsedCameraId();\n      if (cameraSelectUi.hasValue(cameraId)) {\n        cameraSelectUi.setValue(cameraId);\n        cameraActionStartButton.click();\n      } else {\n        $this.persistedDataManager.resetLastUsedCameraId();\n      }\n    }\n  };\n  Html5QrcodeScanner.prototype.createSectionSwap = function () {\n    var $this = this;\n    var TEXT_IF_CAMERA_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfCameraScanSelected();\n    var TEXT_IF_FILE_SCAN_SELECTED = Html5QrcodeScannerStrings.textIfFileScanSelected();\n    var section = document.getElementById(this.getDashboardSectionId());\n    var switchContainer = document.createElement(\"div\");\n    switchContainer.style.textAlign = \"center\";\n    var switchScanTypeLink = BaseUiElementFactory.createElement(\"span\", this.getDashboardSectionSwapLinkId());\n    switchScanTypeLink.style.textDecoration = \"underline\";\n    switchScanTypeLink.style.cursor = \"pointer\";\n    switchScanTypeLink.innerText = ScanTypeSelector.isCameraScanType(this.currentScanType) ? TEXT_IF_CAMERA_SCAN_SELECTED : TEXT_IF_FILE_SCAN_SELECTED;\n    switchScanTypeLink.addEventListener(\"click\", function () {\n      if (!$this.sectionSwapAllowed) {\n        if ($this.verbose) {\n          $this.logger.logError(\"Section swap called when not allowed\");\n        }\n        return;\n      }\n      $this.resetHeaderMessage();\n      $this.fileSelectionUi.resetValue();\n      $this.sectionSwapAllowed = false;\n      if (ScanTypeSelector.isCameraScanType($this.currentScanType)) {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"none\";\n        $this.fileSelectionUi.show();\n        switchScanTypeLink.innerText = TEXT_IF_FILE_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_FILE;\n        $this.insertFileScanImageToScanRegion();\n      } else {\n        $this.clearScanRegion();\n        $this.getCameraScanRegion().style.display = \"block\";\n        $this.fileSelectionUi.hide();\n        switchScanTypeLink.innerText = TEXT_IF_CAMERA_SCAN_SELECTED;\n        $this.currentScanType = Html5QrcodeScanType.SCAN_TYPE_CAMERA;\n        $this.insertCameraScanImageToScanRegion();\n        $this.startCameraScanIfPermissionExistsOnSwap();\n      }\n      $this.sectionSwapAllowed = true;\n    });\n    switchContainer.appendChild(switchScanTypeLink);\n    section.appendChild(switchContainer);\n  };\n  Html5QrcodeScanner.prototype.startCameraScanIfPermissionExistsOnSwap = function () {\n    var _this = this;\n    var $this = this;\n    if (this.persistedDataManager.hasCameraPermissions()) {\n      CameraPermissions.hasPermissions().then(function (hasPermissions) {\n        if (hasPermissions) {\n          var permissionButton = document.getElementById($this.getCameraPermissionButtonId());\n          if (!permissionButton) {\n            _this.logger.logError(\"Permission button not found, fail;\");\n            throw \"Permission button not found\";\n          }\n          permissionButton.click();\n        } else {\n          $this.persistedDataManager.setHasPermission(false);\n        }\n      })[\"catch\"](function (_) {\n        $this.persistedDataManager.setHasPermission(false);\n      });\n      return;\n    }\n  };\n  Html5QrcodeScanner.prototype.resetHeaderMessage = function () {\n    var messageDiv = document.getElementById(this.getHeaderMessageContainerId());\n    messageDiv.style.display = \"none\";\n  };\n  Html5QrcodeScanner.prototype.setHeaderMessage = function (messageText, scannerStatus) {\n    if (!scannerStatus) {\n      scannerStatus = Html5QrcodeScannerStatus.STATUS_DEFAULT;\n    }\n    var messageDiv = this.getHeaderMessageDiv();\n    messageDiv.innerText = messageText;\n    messageDiv.style.display = \"block\";\n    switch (scannerStatus) {\n      case Html5QrcodeScannerStatus.STATUS_SUCCESS:\n        messageDiv.style.background = \"rgba(106, 175, 80, 0.26)\";\n        messageDiv.style.color = \"#477735\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_WARNING:\n        messageDiv.style.background = \"rgba(203, 36, 49, 0.14)\";\n        messageDiv.style.color = \"#cb2431\";\n        break;\n      case Html5QrcodeScannerStatus.STATUS_DEFAULT:\n      default:\n        messageDiv.style.background = \"rgba(0, 0, 0, 0)\";\n        messageDiv.style.color = \"rgb(17, 17, 17)\";\n        break;\n    }\n  };\n  Html5QrcodeScanner.prototype.showHideScanTypeSwapLink = function (shouldDisplay) {\n    if (this.scanTypeSelector.hasMoreThanOneScanType()) {\n      if (shouldDisplay !== true) {\n        shouldDisplay = false;\n      }\n      this.sectionSwapAllowed = shouldDisplay;\n      this.getDashboardSectionSwapLink().style.display = shouldDisplay ? \"inline-block\" : \"none\";\n    }\n  };\n  Html5QrcodeScanner.prototype.insertCameraScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.cameraScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.cameraScanImage);\n      return;\n    }\n    this.cameraScanImage = new Image();\n    this.cameraScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.cameraScanImage);\n    };\n    this.cameraScanImage.width = 64;\n    this.cameraScanImage.style.opacity = \"0.8\";\n    this.cameraScanImage.src = ASSET_CAMERA_SCAN;\n    this.cameraScanImage.alt = Html5QrcodeScannerStrings.cameraScanAltText();\n  };\n  Html5QrcodeScanner.prototype.insertFileScanImageToScanRegion = function () {\n    var $this = this;\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    if (this.fileScanImage) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild(this.fileScanImage);\n      return;\n    }\n    this.fileScanImage = new Image();\n    this.fileScanImage.onload = function (_) {\n      qrCodeScanRegion.innerHTML = \"<br>\";\n      qrCodeScanRegion.appendChild($this.fileScanImage);\n    };\n    this.fileScanImage.width = 64;\n    this.fileScanImage.style.opacity = \"0.8\";\n    this.fileScanImage.src = ASSET_FILE_SCAN;\n    this.fileScanImage.alt = Html5QrcodeScannerStrings.fileScanAltText();\n  };\n  Html5QrcodeScanner.prototype.clearScanRegion = function () {\n    var qrCodeScanRegion = document.getElementById(this.getScanRegionId());\n    qrCodeScanRegion.innerHTML = \"\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionId = function () {\n    return this.elementId + \"__dashboard_section\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionCameraScanRegionId = function () {\n    return this.elementId + \"__dashboard_section_csr\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLinkId = function () {\n    return PublicUiElementIdAndClasses.SCAN_TYPE_CHANGE_ANCHOR_ID;\n  };\n  Html5QrcodeScanner.prototype.getScanRegionId = function () {\n    return this.elementId + \"__scan_region\";\n  };\n  Html5QrcodeScanner.prototype.getDashboardId = function () {\n    return this.elementId + \"__dashboard\";\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageContainerId = function () {\n    return this.elementId + \"__header_message\";\n  };\n  Html5QrcodeScanner.prototype.getCameraPermissionButtonId = function () {\n    return PublicUiElementIdAndClasses.CAMERA_PERMISSION_BUTTON_ID;\n  };\n  Html5QrcodeScanner.prototype.getCameraScanRegion = function () {\n    return document.getElementById(this.getDashboardSectionCameraScanRegionId());\n  };\n  Html5QrcodeScanner.prototype.getDashboardSectionSwapLink = function () {\n    return document.getElementById(this.getDashboardSectionSwapLinkId());\n  };\n  Html5QrcodeScanner.prototype.getHeaderMessageDiv = function () {\n    return document.getElementById(this.getHeaderMessageContainerId());\n  };\n  return Html5QrcodeScanner;\n}();\nexport { Html5QrcodeScanner };","map":{"version":3,"names":["Html5QrcodeConstants","Html5QrcodeScanType","Html5QrcodeErrorFactory","BaseLoggger","isNullOrUndefined","clip","Html5Qrcode","Html5QrcodeScannerStrings","ASSET_FILE_SCAN","ASSET_CAMERA_SCAN","PersistedDataManager","LibraryInfoContainer","CameraPermissions","ScanTypeSelector","TorchButton","FileSelectionUi","BaseUiElementFactory","PublicUiElementIdAndClasses","CameraSelectionUi","CameraZoomUi","Html5QrcodeScannerStatus","toHtml5QrcodeCameraScanConfig","config","fps","qrbox","aspectRatio","disableFlip","videoConstraints","toHtml5QrcodeFullConfig","verbose","formatsToSupport","useBarCodeDetectorIfSupported","experimentalFeatures","Html5QrcodeScanner","elementId","lastMatchFound","cameraScanImage","fileScanImage","fileSelectionUi","createConfig","document","getElementById","scanTypeSelector","supportedScanTypes","currentScanType","getDefaultScanType","sectionSwapAllowed","logger","persistedDataManager","rememberLastUsedCamera","reset","prototype","render","qrCodeSuccessCallback","qrCodeErrorCallback","_this","decodedText","result","setHeaderMessage","lastMatch","STATUS_SUCCESS","errorMessage","error","container","innerHTML","createBasicLayout","html5Qrcode","getScanRegionId","pause","shouldPauseVideo","getHtml5QrcodeOrFail","resume","getState","clear","emptyHtmlContainer","mainContainer","resetBasicLayout","Promise","resolve","reject","isScanning","stop","then","_","logError","getRunningTrackCapabilities","getRunningTrackSettings","applyVideoConstraints","videoConstaints","SCAN_DEFAULT_FPS","DEFAULT_REMEMBER_LAST_CAMERA_USED","DEFAULT_SUPPORTED_SCAN_TYPE","parent","style","position","padding","border","createHeader","qrCodeScanRegion","createElement","scanRegionId","id","width","minHeight","textAlign","appendChild","isCameraScanType","insertCameraScanImageToScanRegion","insertFileScanImageToScanRegion","qrCodeDashboard","dashboardId","getDashboardId","setupInitialDashboard","dashboard","$this","createSection","createSectionControlPanel","hasMoreThanOneScanType","createSectionSwap","header","margin","libraryInfo","renderInto","headerMessageContainer","getHeaderMessageContainerId","display","fontSize","borderTop","section","getDashboardSectionId","createCameraListUi","scpCameraScanRegion","requestPermissionContainer","requestPermissionButton","showHideScanTypeSwapLink","cameraPermissionRequesting","createPermissionButtonIfNotExists","createPermissionButton","getCameras","cameras","setHasPermission","resetHeaderMessage","length","removeChild","renderCameraSelection","noCameraFound","STATUS_WARNING","disabled","getCameraPermissionButtonId","innerText","cameraPermissionTitle","addEventListener","createPermissionsUi","hasCameraPermissions","hasPermissions","sectionControlPanel","getDashboardSectionCameraScanRegionId","isCameraScanRequired","renderFileScanUi","showOnRender","isFileScanType","onFileSelected","file","loadingImage","scanFileV2","html5qrcodeResult","createFrom","create","cameraZoomUi","renderCameraZoomUiIfSupported","cameraCapabilities","zoomCapability","zoomFeature","isSupported","setOnCameraZoomValueChangeCallback","zoomValue","apply","defaultZoom","defaultZoomValueIfSupported","min","max","setValues","step","show","cameraSelectUi","cameraActionContainer","cameraActionStartButton","CAMERA_START_BUTTON_ID","scanButtonStartScanningText","cameraActionStopButton","CAMERA_STOP_BUTTON_ID","scanButtonStopScanningText","torchButton","createAndShowTorchButtonIfSupported","torchFeature","hide","marginLeft","updateTorchCapability","resetCameraActionStartButton","shouldShow","opacity","scanButtonScanningStarting","disable","cameraId","getValue","setLastUsedCameraId","start","getRunningTrackCameraCapabilities","showTorchButtonIfSupported","showZoomSliderIfSupported","enable","hasSingleItem","click","removeOnCameraZoomValueChangeCallback","getLastUsedCameraId","hasValue","setValue","resetLastUsedCameraId","TEXT_IF_CAMERA_SCAN_SELECTED","textIfCameraScanSelected","TEXT_IF_FILE_SCAN_SELECTED","textIfFileScanSelected","switchContainer","switchScanTypeLink","getDashboardSectionSwapLinkId","textDecoration","cursor","resetValue","clearScanRegion","getCameraScanRegion","SCAN_TYPE_FILE","SCAN_TYPE_CAMERA","startCameraScanIfPermissionExistsOnSwap","permissionButton","messageDiv","messageText","scannerStatus","STATUS_DEFAULT","getHeaderMessageDiv","background","color","shouldDisplay","getDashboardSectionSwapLink","Image","onload","src","alt","cameraScanAltText","fileScanAltText","SCAN_TYPE_CHANGE_ANCHOR_ID","CAMERA_PERMISSION_BUTTON_ID"],"sources":["../../src/html5-qrcode-scanner.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}