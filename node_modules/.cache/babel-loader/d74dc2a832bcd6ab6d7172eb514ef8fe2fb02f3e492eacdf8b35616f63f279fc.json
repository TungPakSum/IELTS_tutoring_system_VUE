{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-14cda979\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"row\"\n};\nvar _hoisted_2 = {\n  \"class\": \"tile\"\n};\nvar _hoisted_3 = {\n  \"class\": \"wrapper\"\n};\nvar _hoisted_4 = {\n  \"class\": \"header\"\n};\nvar _hoisted_5 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    \"class\": \"banner-img\"\n  }, [/*#__PURE__*/_createElementVNode(\"img\", {\n    src: \"http://via.placeholder.com/640x360\",\n    alt: \"Image 1\"\n  })], -1 /* HOISTED */);\n});\nvar _hoisted_6 = {\n  \"class\": \"dates\"\n};\nvar _hoisted_7 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"strong\", null, \"DATE: \", -1 /* HOISTED */);\n});\nvar _hoisted_8 = {\n  \"class\": \"card-text\"\n};\nvar _hoisted_9 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\n});\nvar _hoisted_10 = {\n  \"class\": \"stats\"\n};\nvar _hoisted_11 = {\n  \"class\": \"footer\"\n};\nvar _hoisted_12 = [\"onClick\"];\nvar _hoisted_13 = [\"onClick\"];\nvar _hoisted_14 = {\n  \"class\": \"pagination-group row\"\n};\nvar _hoisted_15 = {\n  \"aria-label\": \"Page navigation example\"\n};\nvar _hoisted_16 = {\n  \"class\": \"pagination\"\n};\nvar _hoisted_17 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"li\", {\n    \"class\": \"page-item\"\n  }, [/*#__PURE__*/_createElementVNode(\"a\", {\n    \"class\": \"page-link\",\n    href: \"#\",\n    \"aria-label\": \"Previous\"\n  }, [/*#__PURE__*/_createElementVNode(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"«\")])], -1 /* HOISTED */);\n});\nvar _hoisted_18 = [\"onClick\"];\nvar _hoisted_19 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"a\", {\n    \"class\": \"page-link\",\n    \"aria-label\": \"Next\"\n  }, [/*#__PURE__*/_createElementVNode(\"span\", {\n    \"aria-hidden\": \"false\"\n  }, \"»\")], -1 /* HOISTED */);\n});\nvar _hoisted_20 = [_hoisted_19];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_STRONG = _resolveComponent(\"STRONG\");\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.items, function (item) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item,\n      \"class\": \"col-lg-3 col-md-4 col-sm-6 col-xs-12\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString(item.name), 1 /* TEXT */), _hoisted_5, _createCommentVNode(\" <h6 class=\\\"card-subtitle mb-2 text-muted\\\"> \"), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createTextVNode(\" \" + _toDisplayString(item.date), 1 /* TEXT */)]), _createElementVNode(\"p\", _hoisted_8, _toDisplayString(item.description), 1 /* TEXT */)]), _hoisted_9, _createCommentVNode(\" <ul class=\\\"list-group list-group-flush\\\"> \"), _createElementVNode(\"div\", _hoisted_10, [_createCommentVNode(\" <li class=\\\"list-group-item\\\">賣旗地點: {{ item.location.name }}</li> \"), _createElementVNode(\"div\", null, [_createVNode(_component_STRONG, null, {\n      \"default\": _withCtx(function () {\n        return [_createTextVNode(\"賣旗地點: \")];\n      }),\n      _: 1 /* STABLE */\n    }), _createTextVNode(\" \" + _toDisplayString(item.location.name), 1 /* TEXT */)]), _createCommentVNode(\" <li class=\\\"list-group-item\\\">旗袋總數: {{ item.numOfBags }}</li> \"), _createElementVNode(\"div\", null, [_createVNode(_component_STRONG, null, {\n      \"default\": _withCtx(function () {\n        return [_createTextVNode(\"旗袋總數: \")];\n      }),\n      _: 1 /* STABLE */\n    }), _createTextVNode(\" \" + _toDisplayString(item.numOfBags), 1 /* TEXT */)])]), _createCommentVNode(\" </ul> \"), _createElementVNode(\"div\", _hoisted_11, [_createVNode(_component_router_link, {\n      to: \"/events/\".concat(item._id, \"/stations\"),\n      custom: \"\"\n    }, {\n      \"default\": _withCtx(function (_ref) {\n        var navigate = _ref.navigate;\n        return [_createElementVNode(\"a\", {\n          \"class\": \"btn btn-success\",\n          onClick: navigate\n        }, \"旗站\", 8 /* PROPS */, _hoisted_12)];\n      }),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createVNode(_component_router_link, {\n      to: \"/events/\".concat(item._id, \"/\"),\n      custom: \"\"\n    }, {\n      \"default\": _withCtx(function (_ref2) {\n        var navigate = _ref2.navigate;\n        return [_createElementVNode(\"a\", {\n          \"class\": \"btn btn-success\",\n          onClick: navigate\n        }, \"編緝\", 8 /* PROPS */, _hoisted_13)];\n      }),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])])])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"nav\", _hoisted_15, [_createElementVNode(\"ul\", _hoisted_16, [_hoisted_17, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.pages.slice(_ctx.currentFirstPage, _ctx.currentLastPage), function (i) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: i,\n      \"class\": \"page-item\"\n    }, [_createElementVNode(\"a\", {\n      \"class\": \"page-link\",\n      onClick: function onClick($event) {\n        return _ctx.fetchPage(i);\n      }\n    }, _toDisplayString(i), 9 /* TEXT, PROPS */, _hoisted_18)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"li\", {\n    \"class\": \"page-item\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.nextPage(_ctx.i);\n    })\n  }, _hoisted_20)])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementVNode","src","alt","href","_hoisted_19","_hoisted_1","_createElementBlock","_Fragment","_renderList","_ctx","items","item","key","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","name","_hoisted_5","_createCommentVNode","_hoisted_6","_hoisted_7","date","_hoisted_8","description","_hoisted_9","_hoisted_10","_createVNode","_component_STRONG","location","numOfBags","_hoisted_11","_component_router_link","to","concat","_id","custom","_ref","navigate","onClick","_hoisted_12","_ref2","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","pages","slice","currentFirstPage","currentLastPage","i","$event","fetchPage","_hoisted_18","_cache","nextPage"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/EventsCard.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div\n      v-for=\"item in items\"\n      :key=\"item\"\n      class=\"col-lg-3 col-md-4 col-sm-6 col-xs-12\"\n    >\n      <div class=\"tile\">\n        <div class=\"wrapper\">\n          <div class=\"header\">\n            {{ item.name }}\n          </div>\n          <div class=\"banner-img\">\n            <img src=\"http://via.placeholder.com/640x360\" alt=\"Image 1\" />\n          </div>\n          <!-- <h6 class=\"card-subtitle mb-2 text-muted\"> -->\n          <div class=\"dates\"><strong>DATE: </strong> {{ item.date }}</div>\n          <p class=\"card-text\">\n            {{ item.description }}\n          </p>\n        </div>\n        <br>\n        <!-- <ul class=\"list-group list-group-flush\"> -->\n        <div class=\"stats\">\n          <!-- <li class=\"list-group-item\">賣旗地點: {{ item.location.name }}</li> -->\n          <div><STRONG>賣旗地點: </STRONG> {{ item.location.name }}</div>\n\n          <!-- <li class=\"list-group-item\">旗袋總數: {{ item.numOfBags }}</li> -->\n          <div><STRONG>旗袋總數: </STRONG> {{ item.numOfBags }}</div>\n        </div>\n        <!-- </ul> -->\n        <div class=\"footer\">\n          <router-link\n            v-slot=\"{ navigate }\"\n            :to=\"`/events/${item._id}/stations`\"\n            custom\n          >\n            <a class=\"btn btn-success\" @click=\"navigate\">旗站</a>\n          </router-link>\n          <router-link\n            v-slot=\"{ navigate }\"\n            :to=\"`/events/${item._id}/`\"\n            custom\n          >\n            <a class=\"btn btn-success\" @click=\"navigate\">編緝</a>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"pagination-group row\">\n    <nav aria-label=\"Page navigation example\">\n      <ul class=\"pagination\">\n        <li class=\"page-item\">\n          <a class=\"page-link\" href=\"#\" aria-label=\"Previous\">\n            <span aria-hidden=\"true\">&laquo;</span>\n          </a>\n        </li>\n        <li\n          v-for=\"i in pages.slice(currentFirstPage, currentLastPage)\"\n          :key=\"i\"\n          class=\"page-item\"\n        >\n          <a class=\"page-link\" @click=\"fetchPage(i)\">{{ i }}</a>\n        </li>\n        <li class=\"page-item\" @click=\"nextPage(i)\">\n          <a class=\"page-link\" aria-label=\"Next\">\n            <span aria-hidden=\"false\">&raquo;</span>\n          </a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted, ref } from \"vue\";\n\nexport default {\n  name: \"EventsCard\",\n  setup: function () {\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    const items = ref([]);\n    const user = ref({});\n    let currentFirstPage = ref(1);\n    let currentLastPage = ref(3);\n\n    onMounted(function () {\n      fetchPage(1);\n      currentFirstPage.value = 0;\n      currentLastPage.value = 3;\n    });\n\n    const pages = computed(() => {\n      let pages = [];\n      for (let i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n\n    const fetchPage = async function (page) {\n      if (localStorage.getItem(\"token\") !== null) {\n        let token = localStorage.getItem(\"token\");\n        const response = await fetch(\n          `/api/events/get?perPage=${perPage.value}&page=${page}`,\n          {\n            headers: {\n              \"x-access-token\": token,\n            },\n          }\n        );\n        if (response.ok) {\n          let data = await response.json();\n          user.value = data.user;\n          items.value = data.items;\n          lastPage.value = data.pages;\n        } else {\n          alert(response.statusText);\n        }\n      } else {\n        location.assign(\"/login\");\n      }\n    };\n\n    const nextPage = (currentPage) => {\n      fetchPage(currentPage);\n      currentFirstPage.value += 3;\n      currentLastPage.value += 3;\n    };\n\n    return {\n      items,\n      pages,\n      currentFirstPage,\n      currentLastPage,\n      fetchPage,\n      nextPage,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.pagination-group {\n  margin-top: 20px;\n}\n\n.card {\n  margin-bottom: 10px;\n}\n\n.btn {\n  margin-right: 10px;\n  margin-bottom: 10px;\n}\n\n.card-body {\n  background-color: white;\n}\n\n.banner-img {\n  padding: 5px 5px 0;\n}\n\n.header {\n  border-bottom: 1px solid #ebeff2;\n  padding: 19px 0;\n  text-align: center;\n  color: #59687f;\n  font-size: 600;\n  font-size: 19px;\n  position: relative;\n  font-weight:700;\n}\n\n.banner-img img {\n  width: 100%;\n  border-radius: 5px;\n}\n\n.dates {\n  border: 1px solid #ebeff2;\n  border-radius: 5px;\n  padding: 20px 0px;\n  margin: 10px 20px;\n  font-size: 16px;\n  color: #5aadef;\n  font-weight: 600;\n  overflow: auto;\n}\n.dates div {\n  float: left;\n  width: 100%;\n  text-align: center;\n  position: relative;\n}\n.dates span {\n  width: 1px;\n  height: 40px;\n  position: absolute;\n  right: 0;\n  top: 0;\n  background: #ebeff2;\n}\n.dates strong,\n.stats strong {\n  display: block;\n  color: #adb8c2;\n  font-size: 11px;\n  font-weight: 700;\n}\n\n.stats {\n  border-top: 1px solid #ebeff2;\n  background: #f7f8fa;\n  overflow: auto;\n  padding: 15px 0;\n  font-size: 16px;\n  color: #59687f;\n  font-weight: 600;\n  border-radius: 0 0 5px 5px;\n}\np.card-text {\n  text-align: center;\n  font-weight: 600;\n}\n.stats div {\n  border-right: 1px solid #ebeff2;\n  width: 50%;\n  float: left;\n  text-align: center;\n}\n\n.stats div:nth-of-type(2) {\n  border: none;\n}\n\ndiv.footer {\n  text-align: right;\n  position: relative;\n  margin: 20px 5px;\n}\n\ndiv.footer a.btn {\n  padding: 10px 25px;\n  margin: 10px 2px;\n  font-weight: bold;\n  text-decoration: none;\n  border-radius: 3px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}