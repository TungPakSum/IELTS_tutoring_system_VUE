{"ast":null,"code":"import \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '../assets/userIcon.png';\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-6ff3d538\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = {\n  \"class\": \"card-group row\"\n};\nvar _hoisted_2 = {\n  \"class\": \"card\"\n};\nvar _hoisted_3 = {\n  \"class\": \"card-body\"\n};\nvar _hoisted_4 = {\n  \"class\": \"card-title\"\n};\nvar _hoisted_5 = {\n  \"class\": \"card-text\"\n};\nvar _hoisted_6 = [\"onClick\"];\nvar _hoisted_7 = [\"onClick\"];\nvar _hoisted_8 = {\n  \"class\": \"row card-group\"\n};\nvar _hoisted_9 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    \"class\": \"card-up aqua-gradient\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_10 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"div\", {\n    \"class\": \"avatar mx-auto white\"\n  }, [/*#__PURE__*/_createElementVNode(\"img\", {\n    src: _imports_0,\n    \"class\": \"rounded-circle img-fluid\",\n    alt: \"woman avatar\"\n  })], -1 /* HOISTED */);\n});\nvar _hoisted_11 = {\n  \"class\": \"card-body text-center\"\n};\nvar _hoisted_12 = {\n  \"class\": \"card-title font-weight-bold\"\n};\nvar _hoisted_13 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1 /* HOISTED */);\n});\nvar _hoisted_14 = {\n  key: 0\n};\nvar _hoisted_15 = {\n  key: 1\n};\nvar _hoisted_16 = {\n  \"class\": \"pagination-group row\"\n};\nvar _hoisted_17 = {\n  \"aria-label\": \"Page navigation example\"\n};\nvar _hoisted_18 = {\n  \"class\": \"pagination\"\n};\nvar _hoisted_19 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"li\", {\n    \"class\": \"page-item\"\n  }, [/*#__PURE__*/_createElementVNode(\"a\", {\n    \"class\": \"page-link\",\n    href: \"#\",\n    \"aria-label\": \"Previous\"\n  }, [/*#__PURE__*/_createElementVNode(\"span\", {\n    \"aria-hidden\": \"true\"\n  }, \"«\")])], -1 /* HOISTED */);\n});\nvar _hoisted_20 = [\"onClick\"];\nvar _hoisted_21 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"a\", {\n    \"class\": \"page-link\",\n    \"aria-label\": \"Next\"\n  }, [/*#__PURE__*/_createElementVNode(\"span\", {\n    \"aria-hidden\": \"false\"\n  }, \"»\")], -1 /* HOISTED */);\n});\nvar _hoisted_22 = [_hoisted_21];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.items, function (item) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item,\n      \"class\": \"col-sm-4\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h5\", _hoisted_4, _toDisplayString(item.username), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_5, _toDisplayString(item.role), 1 /* TEXT */), _createVNode(_component_router_link, {\n      to: \"/\".concat(item.role, \"/\").concat(item._id),\n      custom: \"\"\n    }, {\n      \"default\": _withCtx(function (_ref) {\n        var navigate = _ref.navigate;\n        return [_createElementVNode(\"a\", {\n          href: \"#\",\n          \"class\": \"btn btn-primary\",\n          onClick: navigate\n        }, \"編緝\", 8 /* PROPS */, _hoisted_6)];\n      }),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"]), _createElementVNode(\"a\", {\n      href: \"#\",\n      \"class\": \"btn btn-danger\",\n      onClick: function onClick($event) {\n        return _ctx.deleteUsers(item._id);\n      }\n    }, \"刪除\", 8 /* PROPS */, _hoisted_7)])])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_8, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.items, function (item) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item,\n      \"class\": \"card testimonial-card col-sm-5\",\n      style: {\n        \"padding\": \"0px\"\n      }\n    }, [_hoisted_9, _hoisted_10, _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"h4\", _hoisted_12, _toDisplayString(item.username), 1 /* TEXT */), _hoisted_13, item.role === 'admin' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_14, \" 管理員 \")) : _createCommentVNode(\"v-if\", true), item.role === 'stationManager' ? (_openBlock(), _createElementBlock(\"p\", _hoisted_15, \" 旗長 \")) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"nav\", _hoisted_17, [_createElementVNode(\"ul\", _hoisted_18, [_hoisted_19, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.pages.slice(_ctx.currentFirstPage, _ctx.currentLastPage), function (i) {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: i,\n      \"class\": \"page-item\"\n    }, [_createElementVNode(\"a\", {\n      \"class\": \"page-link\",\n      onClick: function onClick($event) {\n        return _ctx.fetchPage(i);\n      }\n    }, _toDisplayString(i), 9 /* TEXT, PROPS */, _hoisted_20)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"li\", {\n    \"class\": \"page-item\",\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return _ctx.nextPage(_ctx.i);\n    })\n  }, _hoisted_22)])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["_imports_0","_createElementVNode","src","alt","href","_hoisted_21","_hoisted_1","_createElementBlock","_Fragment","_renderList","_ctx","items","item","key","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","username","_hoisted_5","role","_createVNode","_component_router_link","to","concat","_id","custom","_ref","navigate","onClick","_hoisted_6","$event","deleteUsers","_hoisted_7","_hoisted_8","style","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","pages","slice","currentFirstPage","currentLastPage","i","fetchPage","_hoisted_20","_cache","nextPage"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/components/UsersCard.vue"],"sourcesContent":["<template>\n  <div class=\"card-group row\">\n    <div\n      v-for=\"item in items\"\n      :key=\"item\"\n      class=\"col-sm-4\"\n    >\n      <div class=\"card\">\n        \n        <div class=\"card-body\">\n          <h5 class=\"card-title\">\n            {{ item.username }}\n          </h5>\n          <p class=\"card-text\">\n            {{ item.role }}\n          </p>\n          <router-link\n            v-slot=\"{ navigate }\"\n            :to=\"`/${item.role}/${item._id}`\"\n            custom\n          >\n            <a\n              href=\"#\"\n              class=\"btn btn-primary\"\n              @click=\"navigate\"\n            >編緝</a>\n          </router-link>\n          <a\n            href=\"#\"\n            class=\"btn btn-danger\"\n            @click=\"deleteUsers(item._id)\"\n          >刪除</a>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <div class=\"row card-group\">\n    <div\n      v-for=\"item in items\"\n      :key=\"item\"\n      class=\"card testimonial-card col-sm-5\"\n      style=\"padding: 0px;\"\n    >\n      <div class=\"card-up aqua-gradient\" />\n      <div class=\"avatar mx-auto white\">\n        <img\n          src=\"../assets/userIcon.png\"\n          class=\"rounded-circle img-fluid\"\n          alt=\"woman avatar\"\n        >\n      </div>\n      <div class=\"card-body text-center\">\n        <h4 class=\"card-title font-weight-bold\">\n          {{ item.username }}\n        </h4>\n        <hr>\n        <p v-if=\"item.role === 'admin'\">\n          管理員\n        </p>\n        <p v-if=\"item.role === 'stationManager'\">\n          旗長\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"pagination-group row\">\n    <nav aria-label=\"Page navigation example\">\n      <ul class=\"pagination\">\n        <li class=\"page-item\">\n          <a\n            class=\"page-link\"\n            href=\"#\"\n            aria-label=\"Previous\"\n          >\n            <span aria-hidden=\"true\">&laquo;</span>\n          </a>\n        </li>\n        <li\n          v-for=\"i in pages.slice(currentFirstPage, currentLastPage)\"\n          :key=\"i\"\n          class=\"page-item\"\n        >\n          <a\n            class=\"page-link\"\n            @click=\"fetchPage(i)\"\n          >{{ i }}</a>\n        </li>\n        <li\n          class=\"page-item\"\n          @click=\"nextPage(i)\"\n        >\n          <a\n            class=\"page-link\"\n            aria-label=\"Next\"\n          >\n            <span aria-hidden=\"false\">&raquo;</span>\n          </a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed } from \"vue\";\n\nexport default {\n  setup: function () {\n    const lastPage = ref(0);\n    const perPage = ref(6);\n    let currentFirstPage = ref(1);\n    let currentLastPage = ref(3);\n    let items = ref([]);\n\n    onMounted(function () {\n      fetchPage(1);\n      currentFirstPage.value = 0;\n      currentLastPage.value = 3;\n    });\n\n    const pages = computed(() => {\n      let pages = [];\n      for (let i = 1; i <= lastPage.value; i++) {\n        pages.push(i);\n      }\n      return pages;\n    });\n\n    const fetchPage = async function (page) {\n      const response = await fetch(\n        `/api/users/get?perPage=${perPage.value}&page=${page}`\n      );\n      if (response.ok) {\n        let data = await response.json();\n        items.value = data.items;\n        lastPage.value = data.pages;\n        console.log(data.items);\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    const createUsers = async function (id) {\n      const response = await fetch(`/api/users/create/${id}`, {\n        method: \"post\",\n        body: JSON.stringify(items.value),\n      });\n      if (response.ok) {\n        alert(\"Users created!\");\n        location.assign(\"/users\");\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    const deleteUsers = async function (id) {\n      const response = await fetch(`/api/users/delete/${id}`, {\n        method: \"delete\",\n        body: JSON.stringify(items.value),\n      });\n      if (response.ok) {\n        alert(\"Users deleted\");\n        location.assign(\"/users\");\n      } else {\n        alert(response.statusText);\n      }\n    };\n\n    // eslint-disable-next-line no-unused-vars\n    const pagination = async function (page) {\n    };\n    const nextPage = (currentPage) => {\n      fetchPage(currentPage);\n      currentFirstPage.value += 3;\n      currentLastPage.value += 3;\n    };\n\n    const test = function (page) {\n      fetchPage(page);\n      console.log(page);\n    };\n\n    return {\n      items,\n      pages,\n      currentFirstPage,\n      currentLastPage,\n      fetchPage,\n      nextPage,\n      pagination,\n      test,\n      deleteUsers,\n      createUsers,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.pagination-group {\n  margin-top: 20px;\n}\n\n.card {\n/* <<<<<<< HEAD */\n    margin: 10px;\n}\n\nbody {\n\tbackground-color: #f5f7fa;\n}\n\n.testimonial-card .card-up {\n  height: 120px;\n  overflow: hidden;\n  border-top-left-radius: .25rem;\n  border-top-right-radius: .25rem;\n}\n\n.aqua-gradient {\n  background: linear-gradient(40deg, #2096ff, #05ffa3) !important;\n}\n\n.testimonial-card .avatar {\n  width: 120px;\n  margin-top: -60px;\n  overflow: hidden;\n  border: 5px solid #fff;\n  border-radius: 50%;\n/* ======= */\n  margin-bottom: 10px;\n/* >>>>>>> fa756739e5a8d40c680b0bed8f025463ddd8a7db */\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}