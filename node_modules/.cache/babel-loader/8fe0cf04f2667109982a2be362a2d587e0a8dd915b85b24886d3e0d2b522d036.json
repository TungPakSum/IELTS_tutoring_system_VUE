{"ast":null,"code":"import _regeneratorRuntime from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { onMounted, ref } from \"vue\";\nimport JwtDecode from \"jwt-decode\";\nexport default {\n  name: \"App\",\n  setup: function setup() {\n    var user = ref({});\n    var login = ref(false);\n    var visible = ref(false);\n    onMounted(function () {\n      fetchPage();\n    });\n    var fetchPage = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (localStorage.getItem(\"token\") !== null) {\n                login.value = true;\n                // user.value = JSON.stringify(decoded)\n                user.value = JwtDecode(localStorage.getItem(\"token\"));\n                console.log(user.value);\n              }\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function fetchPage() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var logout = function logout() {\n      localStorage.removeItem(\"token\");\n      location.reload();\n    };\n    return {\n      user: user,\n      visible: visible,\n      login: login,\n      logout: logout\n    };\n  }\n};","map":{"version":3,"names":["onMounted","ref","JwtDecode","name","setup","user","login","visible","fetchPage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","localStorage","getItem","value","console","log","stop","apply","arguments","logout","removeItem","location","reload"],"sources":["/Users/paksumtung/Documents/COMP4117/comp4117-spring2023-frontend-group-d/src/App.vue"],"sourcesContent":["<template>\n    <div id=\"vue\">\n        <nav class=\"navbar navbar-expand-lg navbar-light\">\n            <div class=\"container-sm\">\n                <a class=\"navbar-brand\">\n                    <img\n                            src=\"./assets/icon.png\"\n                            width=\"148\"\n                            height=\"60\"\n                    >\n                </a>\n                <button\n                        aria-controls=\"navbarSupportedContent\"\n                        aria-expanded=\"false\"\n                        aria-label=\"Toggle navigation\"\n                        class=\"navbar-toggler\"\n                        data-bs-target=\"#navbarSupportedContent\"\n                        data-bs-toggle=\"collapse\"\n                        type=\"button\"\n                        @click=\"visible = !visible\"\n                >\n                    <span class=\"navbar-toggler-icon\"/>\n                </button>\n                <div\n                        id=\"navbarSupportedContent\"\n                        :class=\"!visible ? 'collapse' : ''\"\n                        class=\"navbar-collapse\"\n                >\n                    <ul\n                            v-if=\"login\"\n                            class=\"navbar-nav me-auto mb-2 mb-lg-0\"\n                    >\n                        <li class=\"nav-item\">\n                            <a\n                                    class=\"nav-link\"\n                                    href=\"/events\"\n                            >賣旗日</a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a\n                                    class=\"nav-link\"\n                                    href=\"/admin\"\n                            >CUBC用戶</a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a\n                                    class=\"nav-link\"\n                                    href=\"/stationManager\"\n                            >旗長用戶</a>\n                        </li>\n                        <li class=\"nav-item\">\n                            <a\n                                    class=\"nav-link\"\n                                    href=\"/scan\"\n                            >掃描旗袋二維碼</a>\n                        </li>\n                    </ul>\n\n                    <ul\n                            v-else\n                            class=\"navbar-nav me-auto mb-2 mb-lg-0\"\n                    >\n                        <li class=\"nav-item\">\n                            <a\n                                    class=\"nav-link\"\n                                    href=\"/login\"\n                            >登入</a>\n                        </li>\n                    </ul>\n                    <form class=\"d-flex align-items-center\">\n                        <div>\n                            <ul class=\"navbar-nav me-auto mb-2 mb-lg-0\">\n                                <li class=\"nav-item\">\n                                    <a\n                                            class=\"nav-link\"\n                                    >{{ user.username }}</a>\n                                </li>\n                            </ul>\n                        </div>\n                        <div class=\"align-items-center\">\n                            <i\n                                    v-if=\"login\"\n                                    type=\"submit\"\n                                    class=\"bi bi-box-arrow-in-left\"\n                                    style=\"font-size: 33px;\"\n                                    @click=\"logout\"\n                            />\n                        </div>\n                        <!-- <router-link\n                          v-slot=\"{ navigate }\"\n                          :to=\"{ path: '/login' }\"\n                          custom\n                        > -->\n                        <!-- <button\n                            v-if=\"!login\"\n                            class=\"btn btn-outline-success\"\n                            type=\"submit\"\n                            @click=\"navigate\"\n                          >\n                            登入\n                          </button> -->\n                        <!-- <button\n                          v-if=\"login\"\n                          class=\"btn btn-outline-success\"\n                          type=\"submit\"\n                          @click=\"logout\"\n                        > -->\n                        <!-- </button> -->\n                    </form>\n                </div>\n            </div>\n        </nav>\n        <div class=\"container-sm\">\n            <router-view/>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {onMounted, ref} from \"vue\";\nimport JwtDecode from \"jwt-decode\";\n\nexport default {\n    name: \"App\",\n    setup: function () {\n        const user = ref({});\n        const login = ref(false);\n        let visible = ref(false);\n\n        onMounted(function () {\n            fetchPage();\n        });\n\n        const fetchPage = async function () {\n            if (localStorage.getItem(\"token\") !== null) {\n                login.value = true;\n                // user.value = JSON.stringify(decoded)\n                user.value = JwtDecode(localStorage.getItem(\"token\"));\n                console.log(user.value);\n            }\n        };\n\n        const logout = function () {\n            localStorage.removeItem(\"token\");\n            location.reload();\n        }\n        return {\n            user,\n            visible,\n            login,\n            logout\n        };\n    },\n};\n</script>\n<style scoped>\n.bi-box-arrow-in-left {\n    padding-left: 5px;\n}\n\n/**/\n</style>\n"],"mappings":";;AAuHA,SAAQA,SAAS,EAAEC,GAAG,QAAO,KAAK;AAClC,OAAOC,SAAQ,MAAO,YAAY;AAElC,eAAe;EACXC,IAAI,EAAE,KAAK;EACXC,KAAK,EAAE,SAAAA,MAAA,EAAY;IACf,IAAMC,IAAG,GAAIJ,GAAG,CAAC,CAAC,CAAC,CAAC;IACpB,IAAMK,KAAI,GAAIL,GAAG,CAAC,KAAK,CAAC;IACxB,IAAIM,OAAM,GAAIN,GAAG,CAAC,KAAK,CAAC;IAExBD,SAAS,CAAC,YAAY;MAClBQ,SAAS,EAAE;IACf,CAAC,CAAC;IAEF,IAAMA,SAAQ;MAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAI,SAAAC,QAAA;QAAA,OAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cACd,IAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,MAAM,IAAI,EAAE;gBACxCd,KAAK,CAACe,KAAI,GAAI,IAAI;gBAClB;gBACAhB,IAAI,CAACgB,KAAI,GAAInB,SAAS,CAACiB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;gBACrDE,OAAO,CAACC,GAAG,CAAClB,IAAI,CAACgB,KAAK,CAAC;cAC3B;YAAA;YAAA;cAAA,OAAAL,QAAA,CAAAQ,IAAA;UAAA;QAAA,GAAAX,OAAA;MAAA,CACH;MAAA,gBAPKL,SAAQA,CAAA;QAAA,OAAAC,IAAA,CAAAgB,KAAA,OAAAC,SAAA;MAAA;IAAA,GAOb;IAED,IAAMC,MAAK,GAAI,SAATA,MAAKA,CAAA,EAAgB;MACvBR,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;MAChCC,QAAQ,CAACC,MAAM,EAAE;IACrB;IACA,OAAO;MACHzB,IAAI,EAAJA,IAAI;MACJE,OAAO,EAAPA,OAAO;MACPD,KAAK,EAALA,KAAK;MACLqB,MAAK,EAALA;IACJ,CAAC;EACL;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}